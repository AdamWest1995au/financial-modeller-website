<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How It Works - The Financial Modeller</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #ffffff;
            background: #000000;
            background-image: radial-gradient(circle, rgba(255, 255, 255, 0.08) 1px, transparent 1px);
            background-size: 3.8px 3.8px;
            overflow-x: hidden;
        }

        /* Mouse illumination effect */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            background: radial-gradient(circle 180px at var(--mouse-x, 50%) var(--mouse-y, 50%), 
                        rgba(139, 92, 246, 0.4) 0%, 
                        rgba(139, 92, 246, 0.25) 3%, 
                        rgba(139, 92, 246, 0.12) 8%, 
                        rgba(139, 92, 246, 0.06) 15%, 
                        rgba(139, 92, 246, 0.02) 25%, 
                        rgba(139, 92, 246, 0.005) 40%, 
                        transparent 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            filter: blur(6px);
        }

        body.mouse-active::after {
            opacity: 1;
        }

        /* WAVE LOGO STYLES */
        .logo::before {
            display: none !important;
            content: none !important;
        }

        .logo {
            font-size: 1.5rem !important;
            font-weight: 400 !important;
            color: rgba(255, 255, 255, 0.9) !important;
            text-decoration: none !important;
            display: inline-flex !important;
            align-items: center !important;
            gap: 16px !important;
            letter-spacing: -0.03em !important;
            cursor: pointer !important;
        }

        .logo:hover, 
        .logo:focus, 
        .logo:active,
        .logo:visited {
            text-decoration: none !important;
            color: rgba(255, 255, 255, 0.9) !important;
        }

        .dot-grid {
            width: 48px;
            height: 36px;
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            grid-template-rows: repeat(8, 1fr);
            gap: 0.5px;
            position: relative;
            transform: perspective(200px) rotateY(-15deg);
        }

        .dot {
            width: 2px;
            height: 2px;
            background: #8b5cf6;
            border-radius: 50%;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: center;
        }

        /* Wave pattern - each column has different heights */
        .dot-grid .dot:nth-child(12n+1) { opacity: 0.2; transform: scale(0.5); }
        .dot-grid .dot:nth-child(12n+2) { opacity: 0.3; transform: scale(0.6); }
        .dot-grid .dot:nth-child(12n+3) { opacity: 0.4; transform: scale(0.7); }
        .dot-grid .dot:nth-child(12n+4) { opacity: 0.5; transform: scale(0.8); }
        .dot-grid .dot:nth-child(12n+5) { opacity: 0.6; transform: scale(0.9); }
        .dot-grid .dot:nth-child(12n+6) { opacity: 0.8; transform: scale(1.1); }
        .dot-grid .dot:nth-child(12n+7) { opacity: 0.9; transform: scale(1.2); }
        .dot-grid .dot:nth-child(12n+8) { opacity: 1; transform: scale(1.3); }
        .dot-grid .dot:nth-child(12n+9) { opacity: 0.9; transform: scale(1.2); }
        .dot-grid .dot:nth-child(12n+10) { opacity: 0.7; transform: scale(1); }
        .dot-grid .dot:nth-child(12n+11) { opacity: 0.5; transform: scale(0.8); }
        .dot-grid .dot:nth-child(12n+12) { opacity: 0.3; transform: scale(0.6); }

        .dot {
            background: linear-gradient(90deg, #6d28d9 0%, #8b5cf6 50%, #a78bfa 100%);
        }

        .logo span {
            font-size: 1.5rem;
            font-weight: 400;
            color: rgba(255, 255, 255, 0.9);
            letter-spacing: -0.03em;
            white-space: nowrap;
            text-decoration: none;
        }

        .logo:hover .dot-grid {
            transform: perspective(200px) rotateY(-10deg) scale(1.05);
        }

        .logo:hover .dot {
            animation: wave 2s ease-in-out infinite;
        }

        @keyframes wave {
            0%, 100% {
                transform: scale(var(--scale, 1)) translateY(0);
                opacity: var(--opacity, 0.6);
            }
            50% {
                transform: scale(calc(var(--scale, 1) * 1.3)) translateY(-2px);
                opacity: calc(var(--opacity, 0.6) * 1.2);
            }
        }

        .logo:hover .dot { animation-delay: calc(var(--delay, 0) * 1s); }

        .logo:hover .dot-grid {
            filter: drop-shadow(0 0 15px rgba(139, 92, 246, 0.3));
        }

        /* Header Styles */
        .header {
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 80px;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 40px;
            align-items: center;
        }

        .nav-links a {
            text-decoration: none;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 400;
            font-size: 0.95rem;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: #ffffff;
        }

        .book-call-btn {
            background: #8b5cf6;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            border: 1px solid #8b5cf6;
        }

        .book-call-btn:hover {
            background: #7c3aed;
            transform: translateY(-1px);
            box-shadow: 0 4px 20px rgba(139, 92, 246, 0.4);
        }

        /* Progress Bar Section */
        .progress-bar-section {
            position: sticky;
            top: 80px;
            background: rgba(139, 92, 246, 0.03);
            backdrop-filter: blur(20px);
            padding: 10px 0;
            z-index: 999;
        }

        .progress-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 40px;
            position: relative;
        }

        .progress-track {
            width: 100%;
            height: 10px;
            position: relative;
            margin: 15px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 3px;
        }

        .progress-dot {
            width: 2.4px;
            height: 2.4px;
            background: rgba(139, 92, 246, 0.15);
            border-radius: 50%;
            flex-shrink: 0;
            transition: all 0.15s ease-out;
        }

        .progress-dot.center {
            background: linear-gradient(135deg, #ec4899, #f472b6);
            box-shadow: 0 0 12px rgba(236, 72, 153, 0.9);
            transform: scale(2.5);
        }

        .progress-dot.trail-1 {
            background: rgba(236, 72, 153, 0.6);
            box-shadow: 0 0 8px rgba(236, 72, 153, 0.5);
            transform: scale(2.0);
        }

        .progress-dot.trail-2 {
            background: rgba(236, 72, 153, 0.45);
            box-shadow: 0 0 6px rgba(236, 72, 153, 0.4);
            transform: scale(1.7);
        }

        .progress-dot.trail-3 {
            background: rgba(236, 72, 153, 0.3);
            box-shadow: 0 0 5px rgba(236, 72, 153, 0.3);
            transform: scale(1.4);
        }

        .progress-dot.trail-4 {
            background: rgba(236, 72, 153, 0.2);
            box-shadow: 0 0 4px rgba(236, 72, 153, 0.2);
            transform: scale(1.2);
        }

        .progress-dot.trail-5 {
            background: rgba(236, 72, 153, 0.1);
            box-shadow: 0 0 3px rgba(236, 72, 153, 0.15);
            transform: scale(1.1);
        }

        .progress-dot.trail-6 {
            background: rgba(236, 72, 153, 0.05);
            box-shadow: 0 0 2px rgba(236, 72, 153, 0.1);
            transform: scale(1.05);
        }

        .progress-circles {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0;
            z-index: 10;
        }

        .progress-circle {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #000;
            border: 1px solid rgba(139, 92, 246, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            color: rgba(139, 92, 246, 0.25);
        }

        .progress-circle::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: rgba(139, 92, 246, 0.2);
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.3s ease;
        }

        .progress-circle.active {
            border-color: #8b5cf6;
            color: #ffffff;
            background: rgba(139, 92, 246, 0.1);
            animation: pulsate 2s ease-in-out infinite;
        }

        .progress-circle.active::before {
            opacity: 1;
            transform: scale(1.2);
            animation: ripple 2s ease-in-out infinite;
        }

        .progress-circle.completed {
            background: rgba(139, 92, 246, 0.05);
            border-color: rgba(139, 92, 246, 0.2);
            border-width: 1px;
            color: rgba(139, 92, 246, 0.3);
        }

        @keyframes pulsate {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.4);
            }
            50% {
                transform: scale(1.1);
                box-shadow: 0 0 10px 3px rgba(139, 92, 246, 0.4);
            }
        }

        @keyframes ripple {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: scale(2.5);
                opacity: 0;
            }
        }

        .progress-circle:hover:not(.active) {
            border-color: rgba(139, 92, 246, 0.4);
            color: rgba(139, 92, 246, 0.6);
            transform: scale(1.15);
        }

        /* Main Content Sections */
        .content-section {
            min-height: 60vh;
            padding: 40px 20px;
            position: relative;
            z-index: 2;
        }

        #section-1 {
            padding-bottom: 180px;
            min-height: auto;
        }

        /* Section 2 specific - fly in from bottom */
        #section-2 {
            padding-top: 200px;
            padding-bottom: 80px;
        }
        
        #section-2 .section-header {
            margin-bottom: 40px;
            transform: translateY(200px);
            transition: all 1s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        #section-2 .placeholder-content {
            transform: translateY(200px);
            transition: all 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        #section-2 .section-header.visible,
        #section-2 .placeholder-content.visible {
            transform: translateY(0);
        }

        /* Section 3 specific */
        #section-3 {
            padding-top: 100px;
            padding-bottom: 180px;
        }

        /* Section 4 specific */
        #section-4 {
            padding-top: 200px;
            padding-bottom: 180px;
        }

        /* Section 5 specific */
        #section-5 {
            padding-top: 200px;
        }

        .section-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .section-header {
            text-align: center;
            margin-bottom: 80px;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease;
        }

        .section-header.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .section-header h2 {
            font-size: 3rem;
            color: #ffffff;
            margin-bottom: 16px;
            font-weight: 600;
            letter-spacing: -0.02em;
        }

        /* Section 1: Questionnaire */
        .questionnaire-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            align-items: stretch;
            height: 225px;
        }

        .left-pane, .right-pane {
            position: relative;
            padding: 30px;
            transition: all 0.4s ease;
            cursor: pointer;
            opacity: 0;
            transform: translateX(0);
        }

        .left-pane {
            border-right: 1px solid rgba(139, 92, 246, 0.2);
            transform: translateX(-50px);
        }

        .right-pane {
            transform: translateX(50px);
        }

        .left-pane.visible, .right-pane.visible {
            opacity: 0.6;
            transform: translateX(0);
        }

        .questionnaire-content:hover .left-pane:not(:hover),
        .questionnaire-content:hover .right-pane:not(:hover) {
            opacity: 0.2;
        }

        .left-pane:hover, .right-pane:hover {
            opacity: 1 !important;
        }

        .left-pane:hover .box-header,
        .right-pane:hover .ai-box-header {
            color: #ffffff;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8), 0 0 40px rgba(255, 255, 255, 0.4);
        }

        .animation-box {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 0;
            height: 180px;
            overflow: hidden;
            position: relative;
        }

        .box-header, .ai-box-header {
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', Roboto, sans-serif;
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(139, 92, 246, 0.2);
        }

        .typing-container {
            font-family: 'Courier New', monospace;
            color: #8b5cf6;
            font-size: 0.85rem;
            line-height: 1.7;
            position: relative;
        }

        .question-line {
            opacity: 1;
            transform: translateY(0);
        }

        .cursor {
            display: inline-block;
            width: 2px;
            height: 14px;
            background: #8b5cf6;
            animation: blink 1s infinite;
            margin-left: 2px;
            vertical-align: text-bottom;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        @keyframes fadeInScale {
            0% { 
                opacity: 0; 
                transform: scale(0.9); 
            }
            100% { 
                opacity: 1; 
                transform: scale(1); 
            }
        }

        /* Data integration animation styles */
        @keyframes dataPulse {
            0%, 100% { 
                transform: scale(1); 
                opacity: 0.85; 
            }
            50% { 
                transform: scale(1.1); 
                opacity: 1; 
            }
        }

        @keyframes hubPulse {
            0%, 100% { 
                transform: scale(1); 
            }
            50% { 
                transform: scale(1.05); 
            }
        }

        @keyframes ringRotate {
            0% { 
                transform: rotate(0deg); 
            }
            100% { 
                transform: rotate(360deg); 
            }
        }

        @keyframes lineFlow {
            0% { 
                stroke-dashoffset: 0; 
                opacity: 0.6; 
            }
            50% { 
                opacity: 1; 
            }
            100% { 
                stroke-dashoffset: -20; 
                opacity: 0.6; 
            }
        }

        .data-hub {
            animation: hubPulse 2s ease-in-out infinite;
            transform-origin: center;
        }

        .hub-ring {
            animation: ringRotate 8s linear infinite;
            transform-origin: center;
        }

        .data-source {
            animation: dataPulse 3s ease-in-out infinite;
            transform-origin: center;
        }

        .source-1 { animation-delay: 0s; }
        .source-2 { animation-delay: 0.5s; }
        .source-3 { animation-delay: 1s; }
        .source-4 { animation-delay: 1.5s; }
        .source-5 { animation-delay: 2s; }
        .source-6 { animation-delay: 2.5s; }

        .data-line {
            stroke-dasharray: 10 5;
            animation: lineFlow 2s ease-in-out infinite;
        }

        .line-1 { animation-delay: 0s; }
        .line-2 { animation-delay: 0.3s; }
        .line-3 { animation-delay: 0.6s; }
        .line-4 { animation-delay: 0.9s; }
        .line-5 { animation-delay: 1.2s; }
        .line-6 { animation-delay: 1.5s; }

        /* Accordion Styles */
        .accordion-item {
            background: rgba(139, 92, 246, 0.03);
            border: none;
            border-radius: 0;
            margin-bottom: 0;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: none;
            border-bottom: 1px solid rgba(139, 92, 246, 0.08);
        }

        .accordion-item:hover {
            box-shadow: none;
            background: rgba(139, 92, 246, 0.03);
        }

        .accordion-item.active {
            background: rgba(139, 92, 246, 0.03);
        }

        .accordion-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px 40px;
            cursor: pointer;
            user-select: none;
            background: transparent;
            transition: background 0.2s ease;
        }

        .accordion-header:hover {
            background: transparent;
        }

        .accordion-title {
            margin: 0;
            font-size: 20px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.95);
            flex: 1;
            letter-spacing: -0.01em;
        }

        .accordion-toggle {
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            color: rgba(255, 255, 255, 0.9);
            width: 36px;
            height: 36px;
        }

        .accordion-toggle:hover {
            transform: scale(1.1);
            color: rgba(255, 255, 255, 1);
        }

        .accordion-icon {
            width: 24px;
            height: 24px;
            transition: transform 0.3s ease;
            stroke-width: 2.5;
        }

        .accordion-item.active .accordion-icon {
            transform: rotate(45deg);
        }

        .icon-horizontal {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .accordion-item.active .icon-horizontal {
            opacity: 0;
            transform: rotate(90deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), padding 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 0 40px;
            background: transparent;
        }

        .accordion-item.active .accordion-content {
            max-height: 500px;
            padding: 0 40px 24px 40px;
        }

        .accordion-content p {
            margin: 0;
            font-size: 16px;
            line-height: 1.7;
            color: rgba(255, 255, 255, 0.8);
        }

        .section-2-features {
            margin-top: 40px;
            width: 100vw;
            max-width: none;
            margin-left: calc(-50vw + 50%);
            margin-right: 0;
            padding: 0;
        }

        .feature-list {
            margin-top: 30px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .left-pane .feature-list {
            margin-top: 30px;
        }

        .right-pane .feature-list {
            margin-top: 60px;
        }

        .feature-item {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            color: rgba(255, 255, 255, 0.8);
            opacity: 0;
            transform: translateX(-200px);
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .feature-item.visible {
            opacity: 1;
            transform: translateX(0);
        }

        .right-pane .feature-item {
            transform: translateX(200px);
        }

        .right-pane .feature-item.visible {
            opacity: 1;
            transform: translateX(0);
        }

        .feature-tick {
            width: 5px;
            height: 5px;
            background: #ffffff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            margin-top: 8px;
        }

        .pane-title {
            font-size: 1.8rem;
            color: #ffffff;
            margin-bottom: 30px;
            font-weight: 600;
        }

        /* AI Visualization */
        .ai-visualization {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 0;
            height: 150px;
            position: relative;
            overflow: hidden;
        }

        .ai-nodes-container {
            position: relative;
            width: 100%;
            height: 90px;
        }

        .ai-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .ai-node {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #8b5cf6;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(139, 92, 246, 0.7);
            opacity: 0;
            animation: nodeAppear 0.5s ease forwards, nodePulse 2s ease-in-out infinite;
            z-index: 2;
        }

        @keyframes nodeAppear {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes nodePulse {
            0%, 100% {
                box-shadow: 0 0 10px rgba(139, 92, 246, 0.7);
                transform: scale(1);
            }
            50% {
                box-shadow: 0 0 18px rgba(139, 92, 246, 0.9);
                transform: scale(1.1);
            }
        }

        .ai-path {
            stroke: #8b5cf6;
            stroke-width: 1.5;
            fill: none;
            opacity: 0;
            stroke-dasharray: 500;
            stroke-dashoffset: 500;
            filter: drop-shadow(0 0 4px rgba(139, 92, 246, 0.7));
        }

        .ai-path.animated {
            animation: drawPath 2.5s ease forwards;
        }

        @keyframes drawPath {
            to {
                stroke-dashoffset: 0;
                opacity: var(--base-opacity, 0.7);
            }
        }

        @keyframes flowPulse {
            0%, 100% {
                opacity: var(--base-opacity, 0.7);
                filter: drop-shadow(0 0 4px rgba(139, 92, 246, 0.7));
            }
            50% {
                opacity: calc(var(--base-opacity, 0.7) * 1.3);
                filter: drop-shadow(0 0 12px rgba(139, 92, 246, 1));
            }
        }

        .ai-path.pulsing {
            animation: flowPulse 2.5s ease-in-out infinite;
        }

        .ai-description {
            margin-top: 30px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1rem;
            line-height: 1.6;
        }

        /* Placeholder sections */
        .placeholder-content {
            background: rgba(139, 92, 246, 0.05);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 16px;
            padding: 60px;
            text-align: center;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease;
        }

        .placeholder-content.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Section 2 numbers animation - no box, full width */
        #section-2 .placeholder-content {
            background: transparent;
            border: none;
            padding: 0;
            margin: 0;
            max-width: 100%;
        }

        /* Section 3 spindle animation */
        #section-3 .placeholder-content {
            background: transparent;
            border: none;
            padding: 0;
            margin: 0;
            height: 500px;
            position: relative;
        }

        .spindle-animation {
            width: 100%;
            height: 100%;
            min-height: 500px;
            display: block;
        }

        .placeholder-text {
            font-size: 1.5rem;
            color: rgba(255, 255, 255, 0.6);
            font-style: italic;
        }

        /* Numbers Animation */
        .numbers-animation {
            position: relative;
            width: 100vw;
            margin-left: calc(-50vw + 50%);
            height: 100px;
            overflow: hidden;
        }

        /* Section 2 Features */
        .section-2-features {
            margin-top: 80px;
            display: flex;
            flex-direction: column;
            gap: 30px;
            max-width: 1000px;
            margin-left: 0;
            margin-right: auto;
            text-align: left;
        }

        .section-2-features .feature-item span {
            font-size: 1.1rem;
            line-height: 1.7;
        }

        .section-2-right {
            transform: translateX(200px);
            opacity: 0;
        }

        .section-2-left {
            transform: translateX(-200px);
            opacity: 0;
        }

        .section-2-right.visible,
        .section-2-left.visible {
            opacity: 1;
            transform: translateX(0);
        }

        /* Fix for section 3 and 4 feature items - make them visible and animate on scroll */
        #section-3 .feature-item.section-2-right,
        #section-3 .feature-item.section-2-left,
        #section-4 .feature-item.section-2-right,
        #section-4 .feature-item.section-2-left {
            opacity: 0;
        }

        #section-3 .feature-item.section-2-right.visible,
        #section-3 .feature-item.section-2-left.visible,
        #section-4 .feature-item.section-2-right.visible,
        #section-4 .feature-item.section-2-left.visible {
            opacity: 1;
            transform: translateX(0);
        }

        #section-3 .feature-item span,
        #section-4 .feature-item span {
            color: rgba(255, 255, 255, 0.85) !important;
        }

        @keyframes flyAcross {
            0% {
                left: -100px;
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                left: calc(100% + 100px);
                opacity: 0;
            }
        }

        .flying-number {
            position: absolute;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            font-weight: bold;
            color: #8b5cf6;
            opacity: 0.8;
            white-space: nowrap;
            animation: flyAcross 1s linear;
            text-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
        }

        /* Footer */
        .footer {
            background: rgba(0, 0, 0, 0.5);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 60px 20px 20px;
            position: relative;
            z-index: 2;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
        }

        .footer-section h3 {
            margin-bottom: 20px;
            color: #ffffff;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .footer-section p {
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 12px;
            font-size: 0.9rem;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.5);
            text-decoration: none;
            transition: color 0.3s ease;
            font-size: 0.9rem;
        }

        .footer-links a:hover {
            color: #8b5cf6;
        }

        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 40px;
            padding-top: 20px;
            text-align: center;
            color: rgba(255, 255, 255, 0.4);
            font-size: 0.85rem;
        }

        /* Responsive Design */
        @media (max-width: 968px) {
            .questionnaire-content {
                grid-template-columns: 1fr;
                gap: 60px;
            }

            .section-header h2 {
                font-size: 2rem;
            }

            .pane-title {
                font-size: 1.5rem;
            }

            .nav-links {
                display: none;
            }

            .progress-circle {
                width: 20px;
                height: 20px;
                font-size: 0.7rem;
            }
        }

        @media (max-width: 640px) {
            .progress-container {
                padding: 0 20px;
            }

            .content-section {
                padding: 60px 20px;
            }
        }
    
        /* Figma Data Source Cards */
        .data-source-card {
            background: rgba(15, 15, 25, 0.98);
            border: none;
            border-radius: 12px;
            padding: 20px 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
            position: relative;
            min-height: 100px;
            max-width: 180px;
            width: 100%;
            cursor: pointer;
            backdrop-filter: blur(10px);
            z-index: 10;
            outline: none;
        }

        .data-source-card:hover {
            background: rgba(139, 92, 246, 0.15);
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(139, 92, 246, 0.3);
        }

        .data-source-card:focus,
        .data-source-card:active {
            outline: none;
            border: none;
        }

        .card-icon {
            color: rgba(139, 92, 246, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-label {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            font-weight: 500;
            text-align: center;
        }

        .card-description {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.75rem;
            font-weight: 400;
            text-align: center;
            line-height: 1.4;
            margin-top: 4px;
        }

        .card-indicator {
            width: 8px;
            height: 8px;
            background: rgba(139, 92, 246, 0.4);
            border-radius: 50%;
            position: absolute;
            bottom: 20px;
            left: 20px;
            animation: indicatorPulse 2s ease-in-out infinite;
        }

        @keyframes indicatorPulse {
            0%, 100% {
                opacity: 0.4;
                transform: scale(1);
            }
            50% {
                opacity: 1;
                transform: scale(1.2);
            }
        }

        /* Financial Model Card (Center) */
        .financial-model-card {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(124, 58, 237, 0.1) 100%);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 16px;
            padding: 24px 28px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
            min-height: 100px;
            position: relative;
            overflow: hidden;
            width: 100%;
        }

        .financial-model-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 50%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .financial-model-card:hover {
            border-color: rgba(139, 92, 246, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(139, 92, 246, 0.2);
        }

        .model-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 6px;
        }

        .model-subtitle {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.5);
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #8b5cf6;
            border-radius: 50%;
            display: inline-block;
            animation: statusPulse 1.5s ease-in-out infinite;
        }

        @keyframes statusPulse {
            0%, 100% {
                opacity: 0.6;
                box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.7);
            }
            50% {
                opacity: 1;
                box-shadow: 0 0 0 6px rgba(139, 92, 246, 0);
            }
        }

        /* Card stagger animation */
        .card-1 { animation: cardFadeIn 0.5s ease-out 0.1s both; }
        .card-2 { animation: cardFadeIn 0.5s ease-out 0.2s both; }
        .card-3 { animation: cardFadeIn 0.5s ease-out 0.3s both; }
        .financial-model-card { animation: cardFadeIn 0.6s ease-out 0.4s both; }
        .card-4 { animation: cardFadeIn 0.5s ease-out 0.5s both; }
        .card-5 { animation: cardFadeIn 0.5s ease-out 0.6s both; }
        .card-6 { animation: cardFadeIn 0.5s ease-out 0.7s both; }

        @keyframes cardFadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            #integration-animation > div {
                grid-template-columns: 1fr !important;
            }
        }

        /* Full-width Section 4 adjustments */
        #section-4 .section-container {
            max-width: 100% !important;
            padding: 0 !important;
        }

        /* Responsive grid for full-width cards */
        @media (max-width: 1200px) {
            #section-4 > div > div > div > div {
                max-width: 1000px !important;
            }
        }

        @media (max-width: 900px) {
            #section-4 > div > div > div {
                grid-template-columns: repeat(2, 1fr) !important;
            }
            
            #section-4 .financial-model-card {
                grid-column: 1 / -1 !important;
            }
        }

        @media (max-width: 600px) {
            #section-4 > div > div > div {
                grid-template-columns: 1fr !important;
                gap: 16px !important;
            }
            
            #section-4 > div > div {
                padding: 40px 20px !important;



        /* Connection Lines Animation */
        .connection-line {
            stroke-linecap: round;
            filter: drop-shadow(0 0 6px rgba(139, 92, 246, 0.8));
            stroke-dasharray: 800;
            stroke-dashoffset: 800;
        }

        /* Individual line animations with delays - animate on page load */
        .line-1 { animation: drawLine 1.5s ease-out 1s forwards; }
        .line-2 { animation: drawLine 1.5s ease-out 1.6s forwards; }
        .line-3 { animation: drawLine 1.5s ease-out 2.2s forwards; }
        .line-4 { animation: drawLine 1.5s ease-out 2.8s forwards; }
        .line-5 { animation: drawLine 1.5s ease-out 3.4s forwards; }
        .line-6 { animation: drawLine 1.5s ease-out 4.0s forwards; }

        @keyframes drawLine {
            from {
                stroke-dashoffset: 800;
                opacity: 0;
            }
            to {
                stroke-dashoffset: 0;
                opacity: 0.85;
            }
        }

        /* Data Packets Canvas */
        #dataPacketsCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            display: block;
        }
        }
    }

        /* Modal/Popup Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            z-index: 9999;
            display: none;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .modal-overlay.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: linear-gradient(135deg, rgba(20, 20, 35, 0.98) 0%, rgba(15, 15, 25, 0.98) 100%);
            border: 2px solid rgba(139, 92, 246, 0.4);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            position: relative;
            animation: slideUp 0.3s ease;
            box-shadow: 0 20px 60px rgba(139, 92, 246, 0.3);
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.3);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.5rem;
            line-height: 1;
        }

        .modal-close:hover {
            background: rgba(139, 92, 246, 0.4);
            color: #ffffff;
            transform: rotate(90deg);
        }

        .modal-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .modal-icon {
            width: 60px;
            height: 60px;
            background: rgba(139, 92, 246, 0.2);
            border: 2px solid rgba(139, 92, 246, 0.4);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #8b5cf6;
        }

        .modal-title {
            font-size: 2rem;
            font-weight: 600;
            color: #ffffff;
        }

        .modal-body {
            color: rgba(255, 255, 255, 0.7);
            font-size: 1rem;
            line-height: 1.8;
        }

        .modal-body p {
            margin-bottom: 16px;
        }

        .modal-body ul {
            list-style: none;
            padding-left: 0;
        }

        .modal-body ul li {
            padding-left: 28px;
            margin-bottom: 12px;
            position: relative;
        }

        .modal-body ul li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #8b5cf6;
            font-weight: bold;
        }

        /* Section 5: Loading Bar Animation */
        .loading-bar-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
            padding: 60px 40px;
        }

        .loading-bar-wrapper {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
        }

        .loading-bar-track {
            width: 100%;
            height: 12px;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 100px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .loading-bar-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, 
                #8b5cf6 0%, 
                #a78bfa 50%, 
                #8b5cf6 100%);
            background-size: 200% 100%;
            border-radius: 100px;
            position: relative;
            transition: width 0.1s ease-out;
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.6),
                        0 0 40px rgba(139, 92, 246, 0.4),
                        inset 0 1px 0 rgba(255, 255, 255, 0.3);
            animation: shimmer 2s linear infinite;
        }

        .loading-bar-fill::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.4) 50%, 
                transparent 100%);
            animation: shine 2s ease-in-out infinite;
        }

        @keyframes shimmer {
            0% {
                background-position: 0% 50%;
            }
            100% {
                background-position: 200% 50%;
            }
        }

        @keyframes shine {
            0% {
                left: -100%;
            }
            50%, 100% {
                left: 200%;
            }
        }

        .loading-percentage {
            margin-top: 24px;
            font-size: 3rem;
            font-weight: 700;
            color: #ffffff;
            text-align: center;
            letter-spacing: -0.02em;
            text-shadow: 0 0 30px rgba(139, 92, 246, 0.6),
                         0 0 60px rgba(139, 92, 246, 0.3);
        }

        .loading-text {
            margin-top: 16px;
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.6);
            text-align: center;
            letter-spacing: 0.05em;
        }

        .get-started-button {
            margin-top: 40px;
            padding: 18px 48px;
            font-size: 1.1rem;
            font-weight: 600;
            color: #ffffff;
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            border: 2px solid #8b5cf6;
            border-radius: 12px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(139, 92, 246, 0.4),
                        0 0 40px rgba(139, 92, 246, 0.2);
            opacity: 0;
            transform: scale(0.8) translateY(20px);
            pointer-events: none;
        }

        .get-started-button.visible {
            opacity: 1;
            transform: scale(1) translateY(0);
            pointer-events: auto;
            animation: buttonPulse 2s ease-in-out infinite;
        }

        .get-started-button:hover {
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
            transform: scale(1.05) translateY(-2px);
            box-shadow: 0 8px 30px rgba(139, 92, 246, 0.6),
                        0 0 60px rgba(139, 92, 246, 0.4);
            animation: none;
        }

        @keyframes buttonPulse {
            0%, 100% {
                box-shadow: 0 4px 20px rgba(139, 92, 246, 0.4),
                            0 0 40px rgba(139, 92, 246, 0.2);
            }
            50% {
                box-shadow: 0 6px 30px rgba(139, 92, 246, 0.6),
                            0 0 60px rgba(139, 92, 246, 0.4);
            }
        }

        .loading-subtitle {
            margin-top: 12px;
            font-size: 1.3rem;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
            letter-spacing: -0.01em;
        }
    </style>
    <!-- Three.js and GSAP for 3D animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav-container">
            <a href="index.html" class="logo" id="logo">
                <div class="dot-grid" id="dotGrid"></div>
                <span>The Financial Modeller</span>
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="questionnaire/questionnaire.html">Build a Model</a></li>
                <li><a href="#" onclick="showModal('templates'); return false;">Model Templates</a></li>
                <li><a href="#">How it works</a></li>
                <li><a href="pricing.html">Pricing</a></li>
                <li><a href="#" onclick="showModal('about'); return false;">About</a></li>
                <li><a href="contact.html" class="book-call-btn">Contact us</a></li>
            </ul>
        </nav>
    </header>

    <!-- Progress Bar -->
    <div class="progress-bar-section">
        <div class="progress-container">
            <div class="progress-track" id="progressTrack">
                <!-- Dots will be generated by JavaScript -->
            </div>
            <div class="progress-circles">
                <div class="progress-circle active" data-section="1" onclick="scrollToSection(1)">1</div>
                <div class="progress-circle" data-section="2" onclick="scrollToSection(2)">2</div>
                <div class="progress-circle" data-section="3" onclick="scrollToSection(3)">3</div>
                <div class="progress-circle" data-section="4" onclick="scrollToSection(4)">4</div>
                <div class="progress-circle" data-section="5" onclick="scrollToSection(5)">5</div>
            </div>
        </div>
    </div>

    <!-- Section 1: Answer our Questionnaire -->
    <section class="content-section" id="section-1">
        <div class="section-container">
            <div class="section-header">
                <h2>Step 1: Questionnaire</h2>
            </div>
            
            <div class="questionnaire-content">
                <!-- Left Pane -->
                <div class="left-pane">
                    <div class="animation-box">
                        <div class="box-header">Fill out the questionnaire</div>
                        <div class="typing-container" id="typingContainer"></div>
                    </div>
                    
                    <div class="feature-list">
                        <div class="feature-item" data-index="0">
                            <div class="feature-tick"></div>
                            <span>Complete our intuitive questionnaire, this provides us with a base to build your model</span>
                        </div>
                        <div class="feature-item" data-index="2">
                            <div class="feature-tick"></div>
                            <span>Call out any additional features you would like in your model. If not available in our suite, our dedicated team of experts will have you the new module with a quick turnaround</span>
                        </div>
                    </div>
                </div>

                <!-- Right Pane -->
                <div class="right-pane">
                    
                    <div class="ai-visualization">
                        <div class="ai-box-header">Use our AI to produce your financial model in seconds</div>
                        <div class="ai-nodes-container" id="aiContainer">
                            <svg class="ai-svg" id="aiSvg"></svg>
                        </div>
                    </div>
                    
                    <div class="feature-list">
                        <div class="feature-item" data-index="1">
                            <div class="feature-tick"></div>
                            <span>Upload your financial statements and/or links to your website</span>
                        </div>
                        <div class="feature-item" data-index="3">
                            <div class="feature-tick"></div>
                            <span>Tell us your business model in your own words</span>
                        </div>
                        <div class="feature-item" data-index="4">
                            <div class="feature-tick"></div>
                            <span>Our AI will do the heavy lifting to build you a detailed and calibrated model</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 2: Placeholder -->
    <section class="content-section" id="section-2">
        <div class="section-container">
            <div class="section-header">
                <h2>Step 2: We'll build your model in minutes</h2>
            </div>
            <div class="placeholder-content">
                <div class="numbers-animation" id="numbersAnimation"></div>
                
                <div class="section-2-features">
                    <!-- Accordion 1: Model in minutes -->
                    <div class="accordion-item" data-index="5">
                        <div class="accordion-header">
                            <h3 class="accordion-title">Model in minutes</h3>
                            <button class="accordion-toggle" aria-label="Toggle accordion">
                                <svg class="accordion-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                    <line class="icon-horizontal" x1="12" y1="7" x2="12" y2="17"></line>
                                    <line class="icon-vertical" x1="7" y1="12" x2="17" y2="12"></line>
                                </svg>
                            </button>
                        </div>
                        <div class="accordion-content">
                            <p>Our proprietary technology will take your responses or work with the AI bot to craft your fully functional institutional grade model in a matter of minutes</p>
                        </div>
                    </div>

                    <!-- Accordion 2: Easy updates -->
                    <div class="accordion-item" data-index="6">
                        <div class="accordion-header">
                            <h3 class="accordion-title">Easy updates and wholesale changes</h3>
                            <button class="accordion-toggle" aria-label="Toggle accordion">
                                <svg class="accordion-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                    <line class="icon-horizontal" x1="12" y1="7" x2="12" y2="17"></line>
                                    <line class="icon-vertical" x1="7" y1="12" x2="17" y2="12"></line>
                                </svg>
                            </button>
                        </div>
                        <div class="accordion-content">
                            <p>With our dedicated Excel plugin, you have ongoing access to our modelling library so you can build your model out as your business grows without the need for expensive consultants.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 3: Customization & Refinement -->
        <section class="content-section" id="section-3">
                    
        <div class="section-container">
            <div class="section-header">
                <h2>Step 3: Customization & Refinement</h2>
            </div>
            <div class="placeholder-content" style="display: grid; grid-template-columns: 1fr 1fr; gap: 60px; align-items: center; padding: 60px 40px;">
                <div style="display: flex; justify-content: center; align-items: center; z-index: 10; height: 450px;">
                    <canvas id="step3-chart" style="width: 100%; height: 100%; border-radius: 16px; background: rgba(0, 0, 0, 0.3);"></canvas>
                </div>
                <div style="color: rgba(255, 255, 255, 0.85); line-height: 1.8; z-index: 10;">
                    <div class="feature-item section-2-right" data-index="7" style="opacity: 1 !important; transform: translateX(0) !important; margin-bottom: 30px; text-align: left;">
                        <div class="feature-tick"></div>
                        <span style="color: #ffffff; display: block; text-align: left; line-height: 1.7;">
                            <strong style="font-size: 1.1rem; font-weight: 600;">Customize Your Model in Excel or Online:</strong> Update your model instantly with our Excel plugin or use our online platform. Add new modules, integrate your own components, and reshape your template in minutes with intuitive modelling tools.
                        </span>
                    </div>
                    <div class="feature-item section-2-left" data-index="8" style="opacity: 1 !important; transform: translateX(0) !important; margin-bottom: 30px; text-align: left;">
                        <div class="feature-tick"></div>
                        <span style="color: #ffffff; display: block; text-align: left; line-height: 1.7;">
                            <strong style="font-size: 1.1rem; font-weight: 600;">AI-Powered Forecast Generation:</strong> Upload historical financials and let our AI create first-cut forecasts based on your company's performance, strategy, and market conditions. Generate driver assumptions in seconds with minimal input required.
                        </span>
                    </div>
                    <div class="feature-item section-2-right" data-index="9" style="opacity: 1 !important; transform: translateX(0) !important; text-align: left;">
                        <div class="feature-tick"></div>
                        <span style="color: #ffffff; display: block; text-align: left; line-height: 1.7;">
                            <strong style="font-size: 1.1rem; font-weight: 600;">Real-Time Data Integration:</strong> Connect live data feeds and upload financials instantly when published. Keep your models current with automated updates and seamless data synchronization.
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </section>

                <!-- Section 4: Integration & Data Feeds -->
    <section class="content-section" id="section-4">
        <div class="section-container" style="max-width: 100%; padding: 0;">
            <div class="section-header" style="max-width: 1400px; margin: 0 auto; padding: 0 40px;">
                <h2>Step 4: Integration & Data Feeds</h2>
            </div>
            
            <!-- Full Width Animation -->
            <div style="width: 100%; padding: 80px 40px; background: transparent;">
                <div style="max-width: 1400px; margin: 0 auto;">
                    <div style="position: relative; display: grid; grid-template-columns: repeat(7, 1fr); grid-template-rows: auto auto auto; gap: 40px; width: 100%; justify-items: center;">
                    
                                        <!-- Data Packets Canvas -->
                    <canvas id="dataPacketsCanvas" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 100;"></canvas>
                        <!-- Left Column - Excel Models/files -->
                        <div class="data-source-card card-1" style="grid-column: 2; grid-row: 1;">
                            <div class="card-icon">
                                <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                                    <!-- Excel pixel art icon -->
                                    <rect x="10" y="8" width="28" height="32" fill="#1D6F42"/>
                                    <rect x="12" y="10" width="24" height="28" fill="#21A366"/>
                                    <rect x="14" y="12" width="4" height="4" fill="#FFFFFF"/>
                                    <rect x="20" y="12" width="4" height="4" fill="#FFFFFF"/>
                                    <rect x="26" y="12" width="4" height="4" fill="#FFFFFF"/>
                                    <rect x="14" y="18" width="4" height="4" fill="#FFFFFF"/>
                                    <rect x="20" y="18" width="4" height="4" fill="#FFFFFF"/>
                                    <rect x="26" y="18" width="4" height="4" fill="#FFFFFF"/>
                                    <rect x="14" y="24" width="4" height="4" fill="#FFFFFF"/>
                                    <rect x="20" y="24" width="4" height="4" fill="#FFFFFF"/>
                                    <rect x="26" y="24" width="4" height="4" fill="#FFFFFF"/>
                                    <rect x="14" y="30" width="4" height="4" fill="#FFFFFF"/>
                                    <rect x="20" y="30" width="4" height="4" fill="#FFFFFF"/>
                                    <rect x="26" y="30" width="4" height="4" fill="#FFFFFF"/>
                                    <!-- X letter -->
                                    <rect x="16" y="19" width="2" height="2" fill="#21A366"/>
                                    <rect x="18" y="21" width="2" height="2" fill="#21A366"/>
                                    <rect x="20" y="19" width="2" height="2" fill="#21A366"/>
                                    <rect x="18" y="25" width="2" height="2" fill="#21A366"/>
                                    <rect x="16" y="27" width="2" height="2" fill="#21A366"/>
                                    <rect x="20" y="27" width="2" height="2" fill="#21A366"/>
                                </svg>
                            </div>
                            <div class="card-label">Excel Models/files</div>
                            <div class="card-description">Connect and sync your Excel models and spreadsheets directly</div>
                            <div class="card-indicator"></div>
                        </div>
                        
                        <!-- Middle Column - External data feeds -->
                        <div class="data-source-card card-2" style="grid-column: 4; grid-row: 1;">
                            <div class="card-icon">
                                <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                                    <!-- Cloud with data streams pixel art -->
                                    <rect x="14" y="16" width="4" height="4" fill="#5B9DD9"/>
                                    <rect x="18" y="14" width="4" height="4" fill="#5B9DD9"/>
                                    <rect x="22" y="12" width="4" height="4" fill="#5B9DD9"/>
                                    <rect x="26" y="14" width="4" height="4" fill="#5B9DD9"/>
                                    <rect x="30" y="16" width="4" height="4" fill="#5B9DD9"/>
                                    <rect x="10" y="20" width="28" height="8" fill="#5B9DD9"/>
                                    <rect x="12" y="18" width="24" height="2" fill="#7CB8EA"/>
                                    <rect x="12" y="22" width="24" height="4" fill="#4A89C3"/>
                                    <!-- Download arrows -->
                                    <rect x="20" y="30" width="2" height="6" fill="#FFD700"/>
                                    <rect x="26" y="30" width="2" height="6" fill="#FFD700"/>
                                    <rect x="18" y="34" width="6" height="2" fill="#FFD700"/>
                                    <rect x="24" y="34" width="6" height="2" fill="#FFD700"/>
                                    <rect x="20" y="36" width="2" height="2" fill="#FFD700"/>
                                    <rect x="26" y="36" width="2" height="2" fill="#FFD700"/>
                                    <!-- Data packets -->
                                    <rect x="16" y="20" width="2" height="2" fill="#FFFFFF"/>
                                    <rect x="22" y="20" width="2" height="2" fill="#FFFFFF"/>
                                    <rect x="28" y="20" width="2" height="2" fill="#FFFFFF"/>
                                    <rect x="19" y="24" width="2" height="2" fill="#FFFFFF"/>
                                    <rect x="25" y="24" width="2" height="2" fill="#FFFFFF"/>
                                </svg>
                            </div>
                            <div class="card-label">External data feeds</div>
                            <div class="card-description">Integrate market data, economic indicators, and third-party feeds</div>
                            <div class="card-indicator"></div>
                        </div>
                        
                        <!-- Right Column - Custom data feeds -->
                        <div class="data-source-card card-3" style="grid-column: 6; grid-row: 1;">
                            <div class="card-icon">
                                <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                                    <!-- Database stack pixel art -->
                                    <!-- Top database -->
                                    <rect x="14" y="10" width="20" height="4" fill="#9B59B6"/>
                                    <rect x="12" y="12" width="2" height="4" fill="#8E44AD"/>
                                    <rect x="34" y="12" width="2" height="4" fill="#8E44AD"/>
                                    <rect x="14" y="14" width="20" height="2" fill="#B97FC9"/>
                                    <!-- Middle database -->
                                    <rect x="14" y="18" width="20" height="4" fill="#9B59B6"/>
                                    <rect x="12" y="20" width="2" height="4" fill="#8E44AD"/>
                                    <rect x="34" y="20" width="2" height="4" fill="#8E44AD"/>
                                    <rect x="14" y="22" width="20" height="2" fill="#B97FC9"/>
                                    <!-- Bottom database -->
                                    <rect x="14" y="26" width="20" height="4" fill="#9B59B6"/>
                                    <rect x="12" y="28" width="2" height="4" fill="#8E44AD"/>
                                    <rect x="34" y="28" width="2" height="4" fill="#8E44AD"/>
                                    <rect x="14" y="30" width="20" height="2" fill="#B97FC9"/>
                                    <!-- Connection lines -->
                                    <rect x="22" y="34" width="4" height="2" fill="#E67E22"/>
                                    <rect x="20" y="36" width="2" height="2" fill="#E67E22"/>
                                    <rect x="26" y="36" width="2" height="2" fill="#E67E22"/>
                                    <rect x="18" y="38" width="2" height="2" fill="#E67E22"/>
                                    <rect x="28" y="38" width="2" height="2" fill="#E67E22"/>
                                    <!-- Data indicators -->
                                    <rect x="18" y="12" width="2" height="2" fill="#3EE8C0"/>
                                    <rect x="28" y="12" width="2" height="2" fill="#3EE8C0"/>
                                    <rect x="18" y="20" width="2" height="2" fill="#3EE8C0"/>
                                    <rect x="28" y="28" width="2" height="2" fill="#3EE8C0"/>
                                </svg>
                            </div>
                            <div class="card-label">Custom data feeds</div>
                            <div class="card-description">Build tailored data connections for your specific requirements</div>
                            <div class="card-indicator"></div>
                        </div>
                        
                        <!-- Center Row - Financial Model -->
                        <div class="financial-model-card" style="grid-column: 3 / 6; grid-row: 2; max-width: 600px;">
                            <div style="display: flex; align-items: flex-start; justify-content: space-between; width: 100%;">
                                <div>
                                    <div class="model-title">Financial Model</div>
                                    <div class="model-subtitle">Unified data processing engine</div>
                                </div>
                                <div style="display: flex; gap: 24px; align-items: center;">
                                    <div style="text-align: right;">
                                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.5px;">Status</div>
                                        <div class="status-indicator">
                                            <span class="status-dot"></span>
                                            Connecting...
                                        </div>
                                    </div>
                                    <div style="text-align: right;">
                                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.5px;">Sources</div>
                                        <div style="font-size: 1rem; color: #8b5cf6; font-weight: 600;" id="sources-counter">0 Connected</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Left Column - SaaS and ERP systems -->
                        <div class="data-source-card card-4" style="grid-column: 2; grid-row: 3;">
                            <div class="card-icon">
                                <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                                    <!-- Cloud with gear pixel art -->
                                    <!-- Cloud shape -->
                                    <rect x="14" y="14" width="4" height="4" fill="#3498DB"/>
                                    <rect x="18" y="12" width="4" height="4" fill="#3498DB"/>
                                    <rect x="22" y="10" width="4" height="4" fill="#3498DB"/>
                                    <rect x="26" y="12" width="4" height="4" fill="#3498DB"/>
                                    <rect x="30" y="14" width="4" height="4" fill="#3498DB"/>
                                    <rect x="10" y="18" width="28" height="10" fill="#3498DB"/>
                                    <rect x="12" y="16" width="24" height="2" fill="#5DADE2"/>
                                    <rect x="12" y="20" width="24" height="6" fill="#2874A6"/>
                                    <!-- Gear in cloud -->
                                    <rect x="20" y="18" width="8" height="8" fill="#ECF0F1"/>
                                    <rect x="22" y="16" width="4" height="2" fill="#ECF0F1"/>
                                    <rect x="22" y="26" width="4" height="2" fill="#ECF0F1"/>
                                    <rect x="18" y="20" width="2" height="4" fill="#ECF0F1"/>
                                    <rect x="28" y="20" width="2" height="4" fill="#ECF0F1"/>
                                    <rect x="22" y="20" width="4" height="4" fill="#2C3E50"/>
                                    <!-- Connection ports -->
                                    <rect x="16" y="30" width="4" height="2" fill="#E74C3C"/>
                                    <rect x="22" y="30" width="4" height="2" fill="#2ECC71"/>
                                    <rect x="28" y="30" width="4" height="2" fill="#F39C12"/>
                                    <rect x="18" y="32" width="2" height="4" fill="#E74C3C"/>
                                    <rect x="24" y="32" width="2" height="4" fill="#2ECC71"/>
                                    <rect x="28" y="32" width="2" height="4" fill="#F39C12"/>
                                </svg>
                            </div>
                            <div class="card-label">SaaS and ERP systems</div>
                            <div class="card-description">Link with enterprise platforms like SAP, Oracle, and Salesforce</div>
                            <div class="card-indicator"></div>
                        </div>
                        
                        <!-- Middle Column - Bespoke systems -->
                        <div class="data-source-card card-5" style="grid-column: 4; grid-row: 3;">
                            <div class="card-icon">
                                <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                                    <!-- Terminal/Code window pixel art -->
                                    <!-- Window frame -->
                                    <rect x="8" y="10" width="32" height="28" fill="#2C3E50"/>
                                    <rect x="10" y="12" width="28" height="24" fill="#1A252F"/>
                                    <!-- Window controls -->
                                    <rect x="12" y="14" width="3" height="3" fill="#E74C3C"/>
                                    <rect x="17" y="14" width="3" height="3" fill="#F39C12"/>
                                    <rect x="22" y="14" width="3" height="3" fill="#2ECC71"/>
                                    <!-- Code lines -->
                                    <rect x="12" y="20" width="4" height="2" fill="#E74C3C"/>
                                    <rect x="18" y="20" width="8" height="2" fill="#3498DB"/>
                                    <rect x="28" y="20" width="6" height="2" fill="#2ECC71"/>
                                    <rect x="14" y="24" width="6" height="2" fill="#9B59B6"/>
                                    <rect x="22" y="24" width="10" height="2" fill="#F39C12"/>
                                    <rect x="14" y="28" width="8" height="2" fill="#3498DB"/>
                                    <rect x="24" y="28" width="4" height="2" fill="#E74C3C"/>
                                    <rect x="12" y="32" width="6" height="2" fill="#2ECC71"/>
                                    <rect x="20" y="32" width="12" height="2" fill="#9B59B6"/>
                                    <!-- Cursor -->
                                    <rect x="34" y="32" width="2" height="2" fill="#ECF0F1"/>
                                    <!-- Network connection -->
                                    <rect x="20" y="40" width="2" height="2" fill="#3EE8C0"/>
                                    <rect x="24" y="40" width="2" height="2" fill="#3EE8C0"/>
                                    <rect x="26" y="40" width="2" height="2" fill="#3EE8C0"/>
                                </svg>
                            </div>
                            <div class="card-label">Bespoke systems</div>
                            <div class="card-description">Connect proprietary systems and internal databases seamlessly</div>
                            <div class="card-indicator"></div>
                        </div>
                        
                        <!-- Right Column - Unstructured data -->
                        <div class="data-source-card card-6" style="grid-column: 6; grid-row: 3;">
                            <div class="card-icon">
                                <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                                    <!-- Multiple document types pixel art -->
                                    <!-- PDF document (red) -->
                                    <rect x="10" y="12" width="12" height="16" fill="#E74C3C"/>
                                    <rect x="12" y="14" width="8" height="2" fill="#FFFFFF"/>
                                    <rect x="12" y="18" width="8" height="1" fill="#FFFFFF"/>
                                    <rect x="12" y="20" width="6" height="1" fill="#FFFFFF"/>
                                    <rect x="12" y="22" width="8" height="1" fill="#FFFFFF"/>
                                    <rect x="12" y="24" width="5" height="1" fill="#FFFFFF"/>
                                    <!-- Email (blue) -->
                                    <rect x="18" y="16" width="14" height="12" fill="#3498DB"/>
                                    <rect x="20" y="18" width="10" height="8" fill="#5DADE2"/>
                                    <rect x="20" y="18" width="2" height="2" fill="#3498DB"/>
                                    <rect x="28" y="18" width="2" height="2" fill="#3498DB"/>
                                    <rect x="22" y="20" width="6" height="2" fill="#3498DB"/>
                                    <rect x="24" y="22" width="2" height="2" fill="#3498DB"/>
                                    <!-- Text document (yellow) -->
                                    <rect x="24" y="8" width="12" height="14" fill="#F39C12"/>
                                    <rect x="26" y="10" width="8" height="1" fill="#34495E"/>
                                    <rect x="26" y="12" width="8" height="1" fill="#34495E"/>
                                    <rect x="26" y="14" width="6" height="1" fill="#34495E"/>
                                    <rect x="26" y="16" width="8" height="1" fill="#34495E"/>
                                    <rect x="26" y="18" width="7" height="1" fill="#34495E"/>
                                    <!-- AI processing indicator -->
                                    <rect x="14" y="32" width="20" height="4" fill="#9B59B6"/>
                                    <rect x="16" y="34" width="2" height="1" fill="#ECF0F1"/>
                                    <rect x="20" y="34" width="2" height="1" fill="#ECF0F1"/>
                                    <rect x="24" y="34" width="2" height="1" fill="#ECF0F1"/>
                                    <rect x="28" y="34" width="2" height="1" fill="#ECF0F1"/>
                                    <rect x="32" y="34" width="2" height="1" fill="#ECF0F1"/>
                                </svg>
                            </div>
                            <div class="card-label">Unstructured data</div>
                            <div class="card-description">Extract insights from PDFs, emails, and documents using AI</div>
                            <div class="card-indicator"></div>
                        </div>
                    </div>
                    
                    <!-- Feature Text Below Cards -->
                    <div style="margin-top: 60px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 40px; max-width: 1200px; margin-left: auto; margin-right: auto;">
                        <div class="feature-item section-2-left" data-index="10">
                            <div class="feature-tick"></div>
                            <span style="line-height: 1.7; display: block;"><strong style="font-size: 1.05rem;">Seamless Data Connectivity:</strong> Connect your model to live data sources including ERP systems, accounting software, and market data feeds.</span>
                        </div>
                        <div class="feature-item section-2-right" data-index="11">
                            <div class="feature-tick"></div>
                            <span style="line-height: 1.7; display: block;"><strong style="font-size: 1.05rem;">Extensive API Library:</strong> Integrate with popular business tools like QuickBooks, Xero, and Salesforce with our developer-friendly documentation.</span>
                        </div>
                        <div class="feature-item section-2-left" data-index="12">
                            <div class="feature-tick"></div>
                            <span style="line-height: 1.7; display: block;"><strong style="font-size: 1.05rem;">Real-Time Updates:</strong> Set up automated refresh schedules or trigger updates on-demand for agile decision-making.</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 5: Download & Deploy -->
    <section class="content-section" id="section-5">
        <div class="section-container">
            <div class="section-header">
                <h2>Download & Deploy</h2>
            </div>
            <div class="loading-bar-container">
                <div class="loading-bar-wrapper">
                    <div class="loading-bar-track">
                        <div class="loading-bar-fill" id="loadingBarFill"></div>
                    </div>
                    <div class="loading-percentage" id="loadingPercentage">0%</div>
                    <div class="loading-subtitle">Preparing your financial model...</div>
                    <div class="loading-text">GENERATING MODEL</div>
                </div>
                <a href="questionnaire/questionnaire.html" class="get-started-button" id="getStartedButton">
                    Get Started
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>About The Financial Modeller</h3>
                <p>We're a team of financial analysts and Excel experts dedicated to providing high-quality financial models that save you time and improve your analysis.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="#" onclick="showModal('templates'); return false;">Model Templates</a></li>
                    <li><a href="#">How it works</a></li>
                    <li><a href="#" onclick="showModal('about'); return false;">About</a></li>
                    <li><a href="pricing.html">Pricing</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Contact</h3>
                <p>ðŸ“§ <a href="mailto:info@thefinancialmodeller.com" style="color: rgba(255, 255, 255, 0.5); text-decoration: none; transition: color 0.3s ease;" onmouseover="this.style.color='#8b5cf6'" onmouseout="this.style.color='rgba(255, 255, 255, 0.5)'">info@thefinancialmodeller.com</a></p>
                <p>ðŸ“ž <a href="tel:TBC" style="color: rgba(255, 255, 255, 0.5); text-decoration: none; transition: color 0.3s ease;" onmouseover="this.style.color='#8b5cf6'" onmouseout="this.style.color='rgba(255, 255, 255, 0.5)'">TBC</a></p>
                <p>ðŸ¢ Sydney, Australia</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 The Financial Modeller. All rights reserved. | <a href="#privacy-policy" style="color: rgba(255, 255, 255, 0.4); text-decoration: none; transition: color 0.3s ease;" onmouseover="this.style.color='#8b5cf6'" onmouseout="this.style.color='rgba(255, 255, 255, 0.4)'">Privacy Policy</a> | <a href="#terms-of-service" style="color: rgba(255, 255, 255, 0.4); text-decoration: none; transition: color 0.3s ease;" onmouseover="this.style.color='#8b5cf6'" onmouseout="this.style.color='rgba(255, 255, 255, 0.4)'">Terms of Service</a></p>
        </div>
    </footer>

    <script>
        // Modal functions
        function showModal(type) {
            const messages = {
                'templates': 'Our model templates library is coming soon',
                'about': 'TBC'
            };
            alert(messages[type] || 'Coming soon!');
        }

        // Logo initialization
        function initializeLogo() {
            const dotGrid = document.getElementById('dotGrid');
            const logo = document.getElementById('logo');
            if (!dotGrid || !logo) return;
            dotGrid.innerHTML = '';
            const rows = 8;
            const cols = 12;
            for (let i = 0; i < rows * cols; i++) {
                const dot = document.createElement('div');
                dot.className = 'dot';
                const row = Math.floor(i / cols);
                const col = i % cols;
                const wavePosition = col / cols;
                const rowOffset = row / rows;
                const waveHeight = Math.sin(wavePosition * Math.PI) * Math.sin(rowOffset * Math.PI);
                const scale = 0.5 + (waveHeight * 0.8);
                const opacity = 0.2 + (waveHeight * 0.8);
                if (col < cols / 3) {
                    dot.style.background = '#6d28d9';
                } else if (col < (cols * 2) / 3) {
                    dot.style.background = '#8b5cf6';
                } else {
                    dot.style.background = '#a78bfa';
                }
                dot.style.setProperty('--scale', scale);
                dot.style.setProperty('--opacity', opacity);
                dot.style.setProperty('--delay', (col * 0.05 + row * 0.02));
                if (waveHeight < 0.2) {
                    dot.style.opacity = '0.1';
                    dot.style.transform = 'scale(0.3)';
                }
                dotGrid.appendChild(dot);
            }
        }

        // Initialize progress dots
        function initializeProgressDots() {
            const progressTrack = document.getElementById('progressTrack');
            if (!progressTrack) return;
            
            const dotCount = 100;
            
            for (let i = 0; i < dotCount; i++) {
                const dot = document.createElement('div');
                dot.className = 'progress-dot';
                progressTrack.appendChild(dot);
            }
            
            // Start the animation
            animateProgressDots();
        }

        // Animate dots with gradient illumination
        function animateProgressDots() {
            const dots = document.querySelectorAll('.progress-dot');
            if (dots.length === 0) return;
            
            // Start from the right side of circle 1 (approximately 10% into the dots)
            let currentIndex = Math.floor(dots.length * 0.1);
            const speed = 30; // milliseconds between each step
            
            function updateDots() {
                // Clear all classes first
                dots.forEach(dot => {
                    dot.classList.remove('center', 'trail-1', 'trail-2', 'trail-3', 'trail-4', 'trail-5', 'trail-6');
                });
                
                // Set the center dot (pink - brightest, only one lit)
                if (currentIndex >= 0 && currentIndex < dots.length) {
                    dots[currentIndex].classList.add('center');
                }
                
                // Set trailing fade BEHIND the moving dot (to the left)
                if (currentIndex - 1 >= 0) dots[currentIndex - 1].classList.add('trail-1');
                if (currentIndex - 2 >= 0) dots[currentIndex - 2].classList.add('trail-2');
                if (currentIndex - 3 >= 0) dots[currentIndex - 3].classList.add('trail-3');
                if (currentIndex - 4 >= 0) dots[currentIndex - 4].classList.add('trail-4');
                if (currentIndex - 5 >= 0) dots[currentIndex - 5].classList.add('trail-5');
                if (currentIndex - 6 >= 0) dots[currentIndex - 6].classList.add('trail-6');
                
                // Move to next dot (left to right)
                currentIndex++;
                if (currentIndex >= dots.length) {
                    // Reset to starting position (right of circle 1)
                    currentIndex = Math.floor(dots.length * 0.1);
                }
            }
            
            // Start immediately
            updateDots();
            
            // Run the animation
            setInterval(updateDots, speed);
        }
        
        // Mouse illumination
        let mouseTimeout;
        document.addEventListener('mousemove', (e) => {
            const x = (e.clientX / window.innerWidth) * 100;
            const y = (e.clientY / window.innerHeight) * 100;
            document.documentElement.style.setProperty('--mouse-x', x + '%');
            document.documentElement.style.setProperty('--mouse-y', y + '%');
            document.body.classList.add('mouse-active');
            clearTimeout(mouseTimeout);
            mouseTimeout = setTimeout(() => { document.body.classList.remove('mouse-active'); }, 500);
        });

        // Progress bar functionality
        let currentSection = 1;

        function updateProgressBar() {
            const windowHeight = window.innerHeight;
            
            // Update active circle based on visible section (operates independently)
            const sections = document.querySelectorAll('.content-section');
            sections.forEach((section, index) => {
                const rect = section.getBoundingClientRect();
                if (rect.top <= windowHeight / 2 && rect.bottom >= windowHeight / 2) {
                    currentSection = index + 1;
                    updateCircles(currentSection);
                }
            });
        }

        function updateCircles(activeSection) {
            const circles = document.querySelectorAll('.progress-circle');
            circles.forEach((circle, index) => {
                circle.classList.remove('active', 'completed');
                if (index + 1 < activeSection) {
                    circle.classList.add('completed');
                } else if (index + 1 === activeSection) {
                    circle.classList.add('active');
                }
            });
        }

        function scrollToSection(sectionNum) {
            const section = document.getElementById(`section-${sectionNum}`);
            if (section) {
                const offsetTop = section.offsetTop - 140; // Account for sticky header and progress bar
                window.scrollTo({
                    top: offsetTop,
                    behavior: 'smooth'
                });
            }
        }

        window.addEventListener('scroll', updateProgressBar);

        // Typing animation for questionnaire
        const questions = [
            "What is your business model?",
            "What industry are you in?",
            "What is your revenue structure?",
            "How many employees do you have?",
            "What are your growth projections?",
            "What are your main cost drivers?"
        ];

        let typingInterval = null;
        let isTypingActive = true;

        function startTypingAnimation() {
            const container = document.getElementById('typingContainer');
            const leftPane = document.querySelector('.left-pane');
            if (!container || !leftPane) return;
            
            let questionIndex = 0;
            let charIndex = 0;
            let currentLine = null;
            let typingSpeed = 40;
            let pauseBetweenQuestions = 600;
            
            isTypingActive = true;
            
            function typeCharacter() {
                if (!isTypingActive) return;
                
                if (questionIndex >= questions.length) {
                    setTimeout(() => {
                        container.innerHTML = '';
                        questionIndex = 0;
                        charIndex = 0;
                        currentLine = null;
                        if (isTypingActive) typeCharacter();
                    }, 2000);
                    return;
                }
                
                if (charIndex === 0) {
                    currentLine = document.createElement('div');
                    currentLine.className = 'question-line';
                    currentLine.style.opacity = '1';
                    currentLine.style.transform = 'translateY(0)';
                    currentLine.textContent = 'Q: ';
                    container.appendChild(currentLine);
                }
                
                if (charIndex < questions[questionIndex].length) {
                    currentLine.textContent += questions[questionIndex][charIndex];
                    charIndex++;
                    
                    if (questionIndex === questions.length - 1 && charIndex === questions[questionIndex].length) {
                        const cursor = document.createElement('span');
                        cursor.className = 'cursor';
                        currentLine.appendChild(cursor);
                    }
                    
                    typingInterval = setTimeout(typeCharacter, typingSpeed);
                } else {
                    charIndex = 0;
                    questionIndex++;
                    typingInterval = setTimeout(typeCharacter, pauseBetweenQuestions);
                }
            }
            
            // Start typing immediately
            typeCharacter();
        }

        // AI Visualization
        let aiAnimationTimeout = null;
        let isAIActive = true;

        // Numbers Animation for Section 2
        function createNumbersAnimation() {
            const container = document.getElementById('numbersAnimation');
            if (!container) return;

            const numberTypes = [
                '$1,234,567', '$45.67', '89%', '2024', '3.5x', '+127%',
                '1,234', '$890K', '456', '78.9%', '2025', '99.99',
                '12,345', '$1.2M', '67%', '4.8x', '+234%', '5,678'
            ];

            function createNumber() {
                const number = document.createElement('div');
                number.className = 'flying-number';
                number.textContent = numberTypes[Math.floor(Math.random() * numberTypes.length)];
                
                // Random vertical position
                const randomTop = Math.random() * 80 + 10; // 10% to 90% of container height
                number.style.top = randomTop + '%';
                
                // Random speed variation (0.8s to 1.5s for high speed)
                const duration = Math.random() * 0.7 + 0.8;
                number.style.animationDuration = duration + 's';
                
                container.appendChild(number);
                
                // Remove element after animation completes
                setTimeout(() => {
                    if (number.parentNode) {
                        number.parentNode.removeChild(number);
                    }
                }, duration * 1000);
            }

            // Create numbers at random intervals
            function startAnimation() {
                createNumber();
                const nextDelay = Math.random() * 150 + 50; // 50ms to 200ms between numbers (very frequent)
                setTimeout(startAnimation, nextDelay);
            }

            startAnimation();
        }

        // 3D Spindle Animation for Section 3
        function createAIVisualization() {
            const container = document.getElementById('aiContainer');
            const svg = document.getElementById('aiSvg');
            const rightPane = document.querySelector('.right-pane');
            if (!container || !svg || !rightPane) return;
            
            // Clear any existing content
            container.innerHTML = '';
            svg.innerHTML = '';
            container.appendChild(svg);
            
            const containerWidth = container.offsetWidth;
            const containerHeight = container.offsetHeight;
            
            // Set SVG viewBox
            svg.setAttribute('viewBox', `0 0 ${containerWidth} ${containerHeight}`);
            svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');
            
            const nodes = [];
            const leftNodes = 6;
            const rightNodes = 6;
            const leftX = containerWidth * 0.15;
            const rightX = containerWidth * 0.85;
            const nodeRadius = 3; // Half of node size (6px / 2)
            
            // Create left nodes
            for (let i = 0; i < leftNodes; i++) {
                const node = document.createElement('div');
                node.className = 'ai-node';
                const y = containerHeight * 0.15 + (i * containerHeight * 0.14);
                node.style.left = leftX + 'px';
                node.style.top = y + 'px';
                node.style.animationDelay = `${i * 0.15}s, ${Math.random() * 2}s`;
                container.appendChild(node);
                nodes.push({x: leftX + nodeRadius, y: y + nodeRadius, side: 'left'});
            }
            
            // Create right nodes
            for (let i = 0; i < rightNodes; i++) {
                const node = document.createElement('div');
                node.className = 'ai-node';
                const y = containerHeight * 0.15 + (i * containerHeight * 0.14);
                node.style.left = rightX + 'px';
                node.style.top = y + 'px';
                node.style.animationDelay = `${(leftNodes + i) * 0.15}s, ${Math.random() * 2}s`;
                container.appendChild(node);
                nodes.push({x: rightX + nodeRadius, y: y + nodeRadius, side: 'right'});
            }
            
            let currentPaths = [];
            let sparklers = [];
            let direction = 'forward'; // 'forward' (left to right) or 'backward' (right to left)
            
            function showExpandingConnections() {
                if (!isAIActive) return;
                
                // Clear previous paths and sparklers
                currentPaths.forEach(path => path.remove());
                sparklers.forEach(sparkler => sparkler.element.remove());
                currentPaths = [];
                sparklers = [];
                
                if (direction === 'forward') {
                    // Draw from left to right
                    const numSources = Math.floor(Math.random() * 2) + 2;
                    const sourceIndices = [];
                    while (sourceIndices.length < numSources) {
                        const randomIndex = Math.floor(Math.random() * leftNodes);
                        if (!sourceIndices.includes(randomIndex)) {
                            sourceIndices.push(randomIndex);
                        }
                    }
                    
                    sourceIndices.forEach((leftNodeIndex, sourceIdx) => {
                        const sourceNode = nodes[leftNodeIndex];
                        
                        const numTargets = Math.floor(Math.random() * 3) + 2;
                        const targetIndices = [];
                        while (targetIndices.length < numTargets) {
                            const randomIndex = Math.floor(Math.random() * rightNodes);
                            if (!targetIndices.includes(randomIndex)) {
                                targetIndices.push(randomIndex);
                            }
                        }
                        
                        const branchX = sourceNode.x + (containerWidth * 0.25);
                        const branchY = sourceNode.y;
                        
                        // Create trunk
                        const trunkOpacity = 0.5 + Math.random() * 0.4;
                        const trunkPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                        const trunkD = `M ${sourceNode.x} ${sourceNode.y} L ${branchX} ${branchY}`;
                        trunkPath.setAttribute('d', trunkD);
                        trunkPath.setAttribute('stroke', '#8b5cf6');
                        trunkPath.setAttribute('stroke-width', '1.5');
                        trunkPath.setAttribute('fill', 'none');
                        trunkPath.style.filter = 'drop-shadow(0 0 5px rgba(139, 92, 246, 0.7))';
                        trunkPath.style.opacity = '0';
                        
                        svg.appendChild(trunkPath);
                        currentPaths.push(trunkPath);
                        
                        const trunkLength = trunkPath.getTotalLength();
                        trunkPath.style.strokeDasharray = trunkLength;
                        trunkPath.style.strokeDashoffset = trunkLength;
                        
                        // Trunk sparkler
                        const trunkSparkler = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                        trunkSparkler.setAttribute('r', '3');
                        trunkSparkler.setAttribute('fill', '#ec4899');
                        trunkSparkler.style.filter = 'drop-shadow(0 0 8px rgba(236, 72, 153, 1))';
                        trunkSparkler.style.opacity = '0';
                        svg.appendChild(trunkSparkler);
                        sparklers.push({ element: trunkSparkler, path: trunkPath, length: trunkLength });
                        
                        // Animate trunk drawing
                        setTimeout(() => {
                            if (!isAIActive) return;
                            trunkPath.style.opacity = trunkOpacity;
                            trunkPath.style.transition = 'stroke-dashoffset 0.5s ease-out';
                            trunkPath.style.strokeDashoffset = '0';
                            
                            // Animate sparkler
                            trunkSparkler.style.opacity = '1';
                            const animateTrunkSparkler = (progress) => {
                                if (!isAIActive || progress > 1) {
                                    trunkSparkler.style.opacity = '0';
                                    return;
                                }
                                const point = trunkPath.getPointAtLength(progress * trunkLength);
                                trunkSparkler.setAttribute('cx', point.x);
                                trunkSparkler.setAttribute('cy', point.y);
                                requestAnimationFrame(() => animateTrunkSparkler(progress + 0.02));
                            };
                            animateTrunkSparkler(0);
                        }, 50 + (sourceIdx * 150));
                        
                        // Create branches
                        targetIndices.forEach((targetIndex, i) => {
                            const targetNode = nodes[leftNodes + targetIndex];
                            
                            const branchOpacity = 0.3 + Math.random() * 0.5;
                            const branchPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                            
                            const control1X = branchX + (containerWidth * 0.15);
                            const control1Y = branchY;
                            const control2X = targetNode.x - (containerWidth * 0.15);
                            const control2Y = targetNode.y;
                            
                            const branchD = `M ${branchX} ${branchY} C ${control1X} ${control1Y}, ${control2X} ${control2Y}, ${targetNode.x} ${targetNode.y}`;
                            branchPath.setAttribute('d', branchD);
                            branchPath.setAttribute('stroke', '#8b5cf6');
                            branchPath.setAttribute('stroke-width', '1.2');
                            branchPath.setAttribute('fill', 'none');
                            branchPath.style.filter = 'drop-shadow(0 0 4px rgba(139, 92, 246, 0.6))';
                            branchPath.style.opacity = '0';
                            
                            svg.appendChild(branchPath);
                            currentPaths.push(branchPath);
                            
                            const branchLength = branchPath.getTotalLength();
                            branchPath.style.strokeDasharray = branchLength;
                            branchPath.style.strokeDashoffset = branchLength;
                            
                            // Branch sparkler
                            const branchSparkler = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                            branchSparkler.setAttribute('r', '2.5');
                            branchSparkler.setAttribute('fill', '#a855f7');
                            branchSparkler.style.filter = 'drop-shadow(0 0 6px rgba(168, 85, 247, 0.9))';
                            branchSparkler.style.opacity = '0';
                            svg.appendChild(branchSparkler);
                            sparklers.push({ element: branchSparkler, path: branchPath, length: branchLength, isLast: i === targetIndices.length - 1 && sourceIdx === sourceIndices.length - 1 });
                            
                            // Animate branch drawing
                            setTimeout(() => {
                                if (!isAIActive) return;
                                branchPath.style.opacity = branchOpacity;
                                branchPath.style.transition = 'stroke-dashoffset 0.6s ease-out';
                                branchPath.style.strokeDashoffset = '0';
                                
                                // Animate sparkler
                                branchSparkler.style.opacity = '1';
                                const animateBranchSparkler = (progress) => {
                                    if (!isAIActive || progress > 1) {
                                        branchSparkler.style.opacity = '0';
                                        
                                        // If last sparkler, switch direction and restart
                                        if (sparklers.find(s => s.element === branchSparkler)?.isLast) {
                                            setTimeout(() => {
                                                if (isAIActive) {
                                                    direction = 'backward';
                                                    showExpandingConnections();
                                                }
                                            }, 200);
                                        }
                                        return;
                                    }
                                    const point = branchPath.getPointAtLength(progress * branchLength);
                                    branchSparkler.setAttribute('cx', point.x);
                                    branchSparkler.setAttribute('cy', point.y);
                                    requestAnimationFrame(() => animateBranchSparkler(progress + 0.015));
                                };
                                animateBranchSparkler(0);
                            }, 550 + (sourceIdx * 150) + (i * 100));
                        });
                    });
                } else {
                    // Draw from right to left (new random connections)
                    const numSources = Math.floor(Math.random() * 2) + 2;
                    const sourceIndices = [];
                    while (sourceIndices.length < numSources) {
                        const randomIndex = Math.floor(Math.random() * rightNodes);
                        if (!sourceIndices.includes(randomIndex)) {
                            sourceIndices.push(randomIndex);
                        }
                    }
                    
                    sourceIndices.forEach((rightNodeIndex, sourceIdx) => {
                        const sourceNode = nodes[leftNodes + rightNodeIndex];
                        
                        const numTargets = Math.floor(Math.random() * 3) + 2;
                        const targetIndices = [];
                        while (targetIndices.length < numTargets) {
                            const randomIndex = Math.floor(Math.random() * leftNodes);
                            if (!targetIndices.includes(randomIndex)) {
                                targetIndices.push(randomIndex);
                            }
                        }
                        
                        const branchX = sourceNode.x - (containerWidth * 0.25);
                        const branchY = sourceNode.y;
                        
                        // Create trunk
                        const trunkOpacity = 0.5 + Math.random() * 0.4;
                        const trunkPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                        const trunkD = `M ${sourceNode.x} ${sourceNode.y} L ${branchX} ${branchY}`;
                        trunkPath.setAttribute('d', trunkD);
                        trunkPath.setAttribute('stroke', '#8b5cf6');
                        trunkPath.setAttribute('stroke-width', '1.5');
                        trunkPath.setAttribute('fill', 'none');
                        trunkPath.style.filter = 'drop-shadow(0 0 5px rgba(139, 92, 246, 0.7))';
                        trunkPath.style.opacity = '0';
                        
                        svg.appendChild(trunkPath);
                        currentPaths.push(trunkPath);
                        
                        const trunkLength = trunkPath.getTotalLength();
                        trunkPath.style.strokeDasharray = trunkLength;
                        trunkPath.style.strokeDashoffset = trunkLength;
                        
                        // Trunk sparkler
                        const trunkSparkler = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                        trunkSparkler.setAttribute('r', '3');
                        trunkSparkler.setAttribute('fill', '#ec4899');
                        trunkSparkler.style.filter = 'drop-shadow(0 0 8px rgba(236, 72, 153, 1))';
                        trunkSparkler.style.opacity = '0';
                        svg.appendChild(trunkSparkler);
                        sparklers.push({ element: trunkSparkler, path: trunkPath, length: trunkLength });
                        
                        // Animate trunk drawing
                        setTimeout(() => {
                            if (!isAIActive) return;
                            trunkPath.style.opacity = trunkOpacity;
                            trunkPath.style.transition = 'stroke-dashoffset 0.5s ease-out';
                            trunkPath.style.strokeDashoffset = '0';
                            
                            // Animate sparkler
                            trunkSparkler.style.opacity = '1';
                            const animateTrunkSparkler = (progress) => {
                                if (!isAIActive || progress > 1) {
                                    trunkSparkler.style.opacity = '0';
                                    return;
                                }
                                const point = trunkPath.getPointAtLength(progress * trunkLength);
                                trunkSparkler.setAttribute('cx', point.x);
                                trunkSparkler.setAttribute('cy', point.y);
                                requestAnimationFrame(() => animateTrunkSparkler(progress + 0.02));
                            };
                            animateTrunkSparkler(0);
                        }, 50 + (sourceIdx * 150));
                        
                        // Create branches
                        targetIndices.forEach((targetIndex, i) => {
                            const targetNode = nodes[targetIndex];
                            
                            const branchOpacity = 0.3 + Math.random() * 0.5;
                            const branchPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                            
                            const control1X = branchX - (containerWidth * 0.15);
                            const control1Y = branchY;
                            const control2X = targetNode.x + (containerWidth * 0.15);
                            const control2Y = targetNode.y;
                            
                            const branchD = `M ${branchX} ${branchY} C ${control1X} ${control1Y}, ${control2X} ${control2Y}, ${targetNode.x} ${targetNode.y}`;
                            branchPath.setAttribute('d', branchD);
                            branchPath.setAttribute('stroke', '#8b5cf6');
                            branchPath.setAttribute('stroke-width', '1.2');
                            branchPath.setAttribute('fill', 'none');
                            branchPath.style.filter = 'drop-shadow(0 0 4px rgba(139, 92, 246, 0.6))';
                            branchPath.style.opacity = '0';
                            
                            svg.appendChild(branchPath);
                            currentPaths.push(branchPath);
                            
                            const branchLength = branchPath.getTotalLength();
                            branchPath.style.strokeDasharray = branchLength;
                            branchPath.style.strokeDashoffset = branchLength;
                            
                            // Branch sparkler
                            const branchSparkler = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                            branchSparkler.setAttribute('r', '2.5');
                            branchSparkler.setAttribute('fill', '#a855f7');
                            branchSparkler.style.filter = 'drop-shadow(0 0 6px rgba(168, 85, 247, 0.9))';
                            branchSparkler.style.opacity = '0';
                            svg.appendChild(branchSparkler);
                            sparklers.push({ element: branchSparkler, path: branchPath, length: branchLength, isLast: i === targetIndices.length - 1 && sourceIdx === sourceIndices.length - 1 });
                            
                            // Animate branch drawing
                            setTimeout(() => {
                                if (!isAIActive) return;
                                branchPath.style.opacity = branchOpacity;
                                branchPath.style.transition = 'stroke-dashoffset 0.6s ease-out';
                                branchPath.style.strokeDashoffset = '0';
                                
                                // Animate sparkler
                                branchSparkler.style.opacity = '1';
                                const animateBranchSparkler = (progress) => {
                                    if (!isAIActive || progress > 1) {
                                        branchSparkler.style.opacity = '0';
                                        
                                        // If last sparkler, switch direction and restart
                                        if (sparklers.find(s => s.element === branchSparkler)?.isLast) {
                                            setTimeout(() => {
                                                if (isAIActive) {
                                                    direction = 'forward';
                                                    showExpandingConnections();
                                                }
                                            }, 200);
                                        }
                                        return;
                                    }
                                    const point = branchPath.getPointAtLength(progress * branchLength);
                                    branchSparkler.setAttribute('cx', point.x);
                                    branchSparkler.setAttribute('cy', point.y);
                                    requestAnimationFrame(() => animateBranchSparkler(progress + 0.015));
                                };
                                animateBranchSparkler(0);
                            }, 550 + (sourceIdx * 150) + (i * 100));
                        });
                    });
                }
            }
            
            // Start animation automatically
            isAIActive = true;
            setTimeout(showExpandingConnections, 500);
        }

        // Intersection Observer for section headers and panes
        const sectionObserverOptions = {
            threshold: 0.2,
            rootMargin: '0px 0px -100px 0px'
        };

        const sectionObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    
                    // Start typing animation when left pane is visible
                    if (entry.target.classList.contains('left-pane') && !entry.target.dataset.animated) {
                        entry.target.dataset.animated = 'true';
                        setTimeout(startTypingAnimation, 500);
                    }
                    
                    // Start AI visualization when right pane is visible
                    if (entry.target.classList.contains('right-pane') && !entry.target.dataset.animated) {
                        entry.target.dataset.animated = 'true';
                        setTimeout(createAIVisualization, 500);
                    }
                    
                    // Start numbers animation when section 2 becomes visible
                    if (entry.target.id === 'section-2' && !entry.target.dataset.animated) {
                        entry.target.dataset.animated = 'true';
                        setTimeout(createNumbersAnimation, 800);
                    }
                }
            });
        }, sectionObserverOptions);

        // Separate observer for feature items with sequenced animation
        const featureObserverOptions = {
            threshold: 0.3,
            rootMargin: '-20% 0px -40% 0px'
        };

        let animatedFeatures = new Set();
        let currentAnimatingIndex = 0;

        const featureObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const index = parseInt(entry.target.getAttribute('data-index'));
                    
                    // Animate in sequence based on index
                    if (index === currentAnimatingIndex && !animatedFeatures.has(index)) {
                        setTimeout(() => {
                            entry.target.classList.add('visible');
                            animatedFeatures.add(index);
                            currentAnimatingIndex++;
                        }, 0);
                    } else if (index > currentAnimatingIndex && !animatedFeatures.has(index)) {
                        // Store for later if we're not ready yet
                        const checkSequence = setInterval(() => {
                            if (currentAnimatingIndex === index && !animatedFeatures.has(index)) {
                                entry.target.classList.add('visible');
                                animatedFeatures.add(index);
                                currentAnimatingIndex++;
                                clearInterval(checkSequence);
                            }
                        }, 100);
                    }
                }
            });
        }, featureObserverOptions);

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            initializeLogo();
            initializeProgressDots();
            
            // Observe section headers, panes, and placeholder content with section observer
            const animatedElements = document.querySelectorAll('.section-header, .left-pane, .right-pane, .placeholder-content, #section-2');
            animatedElements.forEach(el => sectionObserver.observe(el));
            
            // Observe each feature item individually with feature observer
            const featureItems = document.querySelectorAll('.feature-item');
            featureItems.forEach(item => featureObserver.observe(item));
            
            // Initialize accordion functionality
            const accordionItems = document.querySelectorAll('.accordion-item');
            
            accordionItems.forEach((item) => {
                const header = item.querySelector('.accordion-header');
                const toggle = item.querySelector('.accordion-toggle');
                
                const toggleAccordion = (e) => {
                    e.stopPropagation();
                    
                    // Close other accordions (optional - remove if you want multiple open at once)
                    // accordionItems.forEach(otherItem => {
                    //     if (otherItem !== item && otherItem.classList.contains('active')) {
                    //         otherItem.classList.remove('active');
                    //     }
                    // });
                    
                    // Toggle current accordion
                    item.classList.toggle('active');
                };
                
                header.addEventListener('click', toggleAccordion);
                toggle.addEventListener('click', toggleAccordion);
            });
            
            // Initialize progress bar
            updateProgressBar();
        });
    </script>

    


<!-- Interactive Chart - Smooth Continuous Motion -->
    <script>
        (function() {
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initChart);
            } else {
                initChart();
            }

            function initChart() {
                const canvas = document.getElementById('step3-chart');
                if (!canvas) return;

                const ctx = canvas.getContext('2d');
                let isHovered = false;
                let animationFrame = null;
                let time = 0;

                function resizeCanvas() {
                    const rect = canvas.getBoundingClientRect();
                    canvas.width = rect.width * window.devicePixelRatio;
                    canvas.height = rect.height * window.devicePixelRatio;
                    ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
                }
                resizeCanvas();
                window.addEventListener('resize', resizeCanvas);

                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                
                // Base values for each month
                const baseValues = [70, 85, 75, 90, 80, 95, 85, 100, 90, 95, 85, 80];

                function animate() {
                    time += isHovered ? 0.03 : 0.01; // Faster when hovered
                    drawChart();
                    animationFrame = requestAnimationFrame(animate);
                }

                function drawChart() {
                    const rect = canvas.getBoundingClientRect();
                    const width = rect.width;
                    const height = rect.height;

                    ctx.clearRect(0, 0, width, height);

                    const padding = 40;
                    const chartWidth = width - padding * 2;
                    const chartHeight = height - padding * 2;

                    // Draw grid
                    ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
                    ctx.lineWidth = 1;
                    for (let i = 0; i <= 5; i++) {
                        const y = padding + (chartHeight / 5) * i;
                        ctx.beginPath();
                        ctx.moveTo(padding, y);
                        ctx.lineTo(width - padding, y);
                        ctx.stroke();
                    }

                    const pointSpacing = chartWidth / (baseValues.length - 1);
                    const maxValue = 150;

                    // Calculate smooth continuous wave motion
                    const data = baseValues.map((baseValue, i) => {
                        // Create smooth wave motion that's synchronized across all points
                        const wave1 = Math.sin(time + i * 0.5) * 8;
                        const wave2 = Math.sin(time * 1.5 + i * 0.3) * 5;
                        const wave3 = Math.cos(time * 0.7 + i * 0.4) * 6;
                        return baseValue + wave1 + wave2 + wave3;
                    });

                    // Calculate smooth curve points
                    const points = data.map((value, i) => ({
                        x: padding + pointSpacing * i,
                        y: height - padding - (value / maxValue) * chartHeight
                    }));

                    // Create gradient
                    const gradient = ctx.createLinearGradient(0, padding, 0, height - padding);
                    gradient.addColorStop(0, 'rgba(139, 92, 246, 0.8)');
                    gradient.addColorStop(1, 'rgba(139, 92, 246, 0.1)');

                    // Draw filled area with smooth curve
                    ctx.fillStyle = gradient;
                    ctx.beginPath();
                    ctx.moveTo(padding, height - padding);
                    ctx.lineTo(points[0].x, points[0].y);
                    
                    // Draw smooth bezier curve through points
                    for (let i = 0; i < points.length - 1; i++) {
                        const xc = (points[i].x + points[i + 1].x) / 2;
                        const yc = (points[i].y + points[i + 1].y) / 2;
                        ctx.quadraticCurveTo(points[i].x, points[i].y, xc, yc);
                    }
                    
                    // Last point
                    const lastPoint = points[points.length - 1];
                    ctx.lineTo(lastPoint.x, lastPoint.y);
                    ctx.lineTo(width - padding, height - padding);
                    ctx.closePath();
                    ctx.fill();

                    // Draw smooth line (NO DOTS)
                    ctx.strokeStyle = '#8b5cf6';
                    ctx.lineWidth = 3;
                    ctx.lineCap = 'round';
                    ctx.lineJoin = 'round';
                    ctx.shadowBlur = 8;
                    ctx.shadowColor = 'rgba(139, 92, 246, 0.5)';
                    ctx.beginPath();
                    ctx.moveTo(points[0].x, points[0].y);
                    
                    for (let i = 0; i < points.length - 1; i++) {
                        const xc = (points[i].x + points[i + 1].x) / 2;
                        const yc = (points[i].y + points[i + 1].y) / 2;
                        ctx.quadraticCurveTo(points[i].x, points[i].y, xc, yc);
                    }
                    
                    ctx.lineTo(lastPoint.x, lastPoint.y);
                    ctx.stroke();
                    ctx.shadowBlur = 0;

                    // NO DOTS - removed the point drawing code

                    // Draw axis labels
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
                    ctx.font = '10px sans-serif';
                    ctx.textAlign = 'center';
                    months.forEach((month, i) => {
                        const x = padding + pointSpacing * i;
                        ctx.fillText(month, x, height - padding + 20);
                    });

                    // Draw "Live Data" indicator
                    if (isHovered) {
                        ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
                        ctx.fillRect(width - 90, 10, 80, 25);
                        ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
                        ctx.font = '12px sans-serif';
                        ctx.textAlign = 'left';
                        ctx.fillText('Live Data', width - 85, 27);
                    }
                }

                canvas.addEventListener('mouseenter', () => {
                    isHovered = true;
                    canvas.style.cursor = 'pointer';
                });

                canvas.addEventListener('mouseleave', () => {
                    isHovered = false;
                    canvas.style.cursor = 'default';
                });

                animate();
            }
        })();
    </script>



        <!-- Data Packets Canvas Animation -->
    <script>
        (function() {
            const section4 = document.getElementById('section-4');
            let canvas, ctx;
            let particles = [];
            let animationFrame;
            let isAnimating = false;
            
            let currentParticleIndex = 0;
            let particleQueue = [];
            let connectedCount = 0;
            
            function onSnakeHit(cardNum) {
                console.log('Snake hit! From card:', cardNum);
                
                connectedCount++;
                if (connectedCount > 999) {
                    connectedCount = 0;
                }
                
                const counterElement = document.getElementById('sources-counter');
                if (counterElement) {
                    counterElement.textContent = connectedCount + ' Connected';
                } else {
                    console.error('Counter element not found!');
                }
                
                setTimeout(() => {
                    currentParticleIndex++;
                    if (currentParticleIndex >= particleQueue.length) {
                        currentParticleIndex = 0;
                    }
                    
                    const nextParticle = particleQueue[currentParticleIndex];
                    if (nextParticle) {
                        nextParticle.startTime = Date.now();
                        console.log('Starting next particle:', currentParticleIndex);
                    }
                }, 500);
            }

            class SnakeParticle {
                constructor(pathPoints, delay, cardNum, onHit) {
                    this.pathPoints = pathPoints;
                    this.delay = delay;
                    this.cardNum = cardNum;
                    this.onHit = onHit;
                    this.currentIndex = 0;
                    this.trail = [];
                    this.maxTrailLength = 30;
                    this.active = false;
                    this.startTime = Date.now() + delay;
                    this.speed = 0.3;
                    this.finished = false;
                    this.dotSize = 3;
                    this.hasHit = false;
                }

                update() {
                    const now = Date.now();
                    if (now < this.startTime) return;
                    
                    if (this.finished) {
                        if (now - this.finishTime > 2000) {
                            this.reset();
                        }
                        return;
                    }
                    
                    this.active = true;
                    this.currentIndex += this.speed;
                    
                    const progressPercentage = this.currentIndex / this.pathPoints.length;
                    
                    if (progressPercentage >= 0.95) {
                        this.finished = true;
                        this.finishTime = now;
                        this.trail = [];
                        
                        if (!this.hasHit && this.onHit) {
                            this.hasHit = true;
                            this.onHit(this.cardNum);
                        }
                        return;
                    }
                    
                    if (this.currentIndex >= this.pathPoints.length) {
                        this.finished = true;
                        this.finishTime = now;
                        return;
                    }
                    
                    const point = this.pathPoints[Math.floor(this.currentIndex)];
                    if (point) {
                        this.trail.push({ ...point, age: 0 });
                    }
                    
                    this.trail = this.trail.map(p => ({ ...p, age: p.age + 1 }))
                                         .filter(p => p.age < this.maxTrailLength);
                }

                reset() {
                    this.currentIndex = 0;
                    this.trail = [];
                    this.active = false;
                    this.finished = false;
                    this.hasHit = false;
                    this.startTime = Date.now() + Math.random() * 2000 + 500;
                }

                draw(ctx) {
                    if (!this.active) return;
                    
                    // Draw uniform-width trail that fades to background
                    this.trail.forEach((point, index) => {
                        const age = point.age;
                        const alpha = 1 - (age / this.maxTrailLength); // Smooth fade
                        
                        // Uniform size dots - no arrow taper
                        ctx.fillStyle = `rgba(139, 92, 246, ${alpha * 0.7})`;
                        ctx.fillRect(
                            point.x - this.dotSize/2, 
                            point.y - this.dotSize/2, 
                            this.dotSize, 
                            this.dotSize
                        );
                    });
                }
            }

            function initCanvas() {
                canvas = document.getElementById('dataPacketsCanvas');
                if (!canvas) {
                    console.log('Canvas not found');
                    return false;
                }

                ctx = canvas.getContext('2d');
                const rect = canvas.getBoundingClientRect();
                canvas.width = rect.width;
                canvas.height = rect.height;
                
                console.log('Canvas initialized:', canvas.width, 'x', canvas.height);
                return true;
            }

            function createLPath(startX, startY, endX, endY, horizontalFirst) {
                // Create an L-shaped path with corner at outer box position (outer L)
                const points = [];
                const step = 3; // Distance between points
                
                if (horizontalFirst) {
                    // Go horizontal first, then vertical
                    // Corner is at (startX, endY) - outer box's X position
                    const cornerX = startX;
                    const cornerY = endY;
                    
                    // Horizontal segment
                    const dx = cornerX - startX;
                    const steps = Math.abs(Math.floor(dx / step));
                    const xDir = dx > 0 ? 1 : -1;
                    
                    for (let i = 0; i <= steps; i++) {
                        points.push({ 
                            x: startX + (i * step * xDir), 
                            y: startY 
                        });
                    }
                    
                    // Vertical segment
                    const dy = endY - startY;
                    const vSteps = Math.abs(Math.floor(dy / step));
                    const yDir = dy > 0 ? 1 : -1;
                    
                    for (let i = 1; i <= vSteps; i++) {
                        points.push({ 
                            x: startX, 
                            y: startY + (i * step * yDir) 
                        });
                    }
                    
                    // Final horizontal segment to reach end
                    const dx2 = endX - cornerX;
                    const hSteps = Math.abs(Math.floor(dx2 / step));
                    const xDir2 = dx2 > 0 ? 1 : -1;
                    
                    for (let i = 1; i <= hSteps; i++) {
                        points.push({ 
                            x: cornerX + (i * step * xDir2), 
                            y: endY 
                        });
                    }
                } else {
                    // Go vertical first, then horizontal
                    // Corner is at (endX, startY) - outer box's Y position
                    const cornerX = endX;
                    const cornerY = startY;
                    
                    // Vertical segment
                    const dy = cornerY - startY;
                    const steps = Math.abs(Math.floor(dy / step));
                    const yDir = dy > 0 ? 1 : -1;
                    
                    for (let i = 0; i <= steps; i++) {
                        points.push({ 
                            x: startX, 
                            y: startY + (i * step * yDir) 
                        });
                    }
                    
                    // Horizontal segment
                    const dx = endX - startX;
                    const hSteps = Math.abs(Math.floor(dx / step));
                    const xDir = dx > 0 ? 1 : -1;
                    
                    for (let i = 1; i <= hSteps; i++) {
                        points.push({ 
                            x: startX + (i * step * xDir), 
                            y: startY 
                        });
                    }
                    
                    // Final vertical segment to reach end
                    const dy2 = endY - cornerY;
                    const vSteps = Math.abs(Math.floor(dy2 / step));
                    const yDir2 = dy2 > 0 ? 1 : -1;
                    
                    for (let i = 1; i <= vSteps; i++) {
                        points.push({ 
                            x: endX, 
                            y: cornerY + (i * step * yDir2) 
                        });
                    }
                }
                
                // Add final point
                points.push({ x: endX, y: endY });
                
                return points;
            }

            function getEdgePoint(rect, canvasRect, direction) {
                // Get a point on the edge of a rectangle
                const relativeRect = {
                    left: rect.left - canvasRect.left,
                    right: rect.right - canvasRect.left,
                    top: rect.top - canvasRect.top,
                    bottom: rect.bottom - canvasRect.top,
                    centerX: (rect.left + rect.right) / 2 - canvasRect.left,
                    centerY: (rect.top + rect.bottom) / 2 - canvasRect.top
                };
                
                // Return edge point based on direction
                if (direction === 'bottom') return { x: relativeRect.centerX, y: relativeRect.bottom };
                if (direction === 'top') return { x: relativeRect.centerX, y: relativeRect.top };
                if (direction === 'right') return { x: relativeRect.right, y: relativeRect.centerY };
                if (direction === 'left') return { x: relativeRect.left, y: relativeRect.centerY };
                
                return { x: relativeRect.centerX, y: relativeRect.centerY };
            }

            function createParticles() {
                particles = [];
                particleQueue = [];
                currentParticleIndex = 0;
                connectedCount = 0;
                
                const gridContainer = canvas.closest('[style*="display: grid"]');
                if (!gridContainer) {
                    console.log('Grid not found');
                    return;
                }

                const canvasRect = canvas.getBoundingClientRect();
                const centerCard = document.querySelector('.financial-model-card');
                if (!centerCard) {
                    console.log('Center card not found');
                    return;
                }

                const centerRect = centerCard.getBoundingClientRect();
                
                const cardConfig = [
                    { num: 1, fromEdge: 'bottom', toEdge: 'left', horizontalFirst: true },
                    { num: 2, fromEdge: 'bottom', toEdge: 'top', horizontalFirst: false },
                    { num: 3, fromEdge: 'bottom', toEdge: 'right', horizontalFirst: true },
                    { num: 4, fromEdge: 'top', toEdge: 'left', horizontalFirst: true },
                    { num: 5, fromEdge: 'top', toEdge: 'bottom', horizontalFirst: false },
                    { num: 6, fromEdge: 'top', toEdge: 'right', horizontalFirst: true }
                ];

                cardConfig.forEach((config, index) => {
                    const card = document.querySelector(`.card-${config.num}`);
                    if (!card) {
                        console.log('Card not found:', config.num);
                        return;
                    }

                    const cardRect = card.getBoundingClientRect();
                    const startPoint = getEdgePoint(cardRect, canvasRect, config.fromEdge);
                    const endPoint = getEdgePoint(centerRect, canvasRect, config.toEdge);
                    
                    const pathPoints = createLPath(
                        startPoint.x, 
                        startPoint.y, 
                        endPoint.x, 
                        endPoint.y, 
                        config.horizontalFirst
                    );
                    
                    const delay = index === 0 ? 0 : 999999999;
                    const particle = new SnakeParticle(pathPoints, delay, config.num, onSnakeHit);
                    particles.push(particle);
                    particleQueue.push(particle);
                });
                
                console.log('Created', particles.length, 'snake particles (sequential mode)');
            }

            function animate() {
                if (!ctx || !canvas) return;
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach(p => { p.update(); p.draw(ctx); });
                if (isAnimating) animationFrame = requestAnimationFrame(animate);
            }

            function startAnimation() {
                if (isAnimating) return;
                isAnimating = true;
                animate();
            }

            function stopAnimation() {
                isAnimating = false;
                if (animationFrame) cancelAnimationFrame(animationFrame);
            }

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        if (!isAnimating) {
                            setTimeout(() => {
                                if (initCanvas()) {
                                    createParticles();
                                    startAnimation();
                                }
                            }, 300);
                        }
                    } else {
                        stopAnimation();
                    }
                });
            }, { threshold: 0.2 });

            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', () => {
                    if (section4) observer.observe(section4);
                });
            } else {
                if (section4) observer.observe(section4);
            }

            let resizeTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    if (isAnimating) {
                        stopAnimation();
                        if (initCanvas()) {
                            createParticles();
                            startAnimation();
                        }
                    }
                }, 250);
            });
        })();
    </script>

    <!-- Modal/Popup Structure -->
    <div class="modal-overlay" id="cardModal">
        <div class="modal-content">
            <div class="modal-close" onclick="closeModal()">Ã—</div>
            <div class="modal-header">
                <div class="modal-icon" id="modalIcon"></div>
                <h2 class="modal-title" id="modalTitle"></h2>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <script>
        // Modal functionality
        const cardData = {
            'Excel Models/files': {
                icon: '<svg width="48" height="48" viewBox="0 0 48 48" fill="none"><rect x="10" y="8" width="28" height="32" fill="#1D6F42"/><rect x="12" y="10" width="24" height="28" fill="#21A366"/><rect x="14" y="12" width="4" height="4" fill="#FFFFFF"/><rect x="20" y="12" width="4" height="4" fill="#FFFFFF"/><rect x="26" y="12" width="4" height="4" fill="#FFFFFF"/><rect x="14" y="18" width="4" height="4" fill="#FFFFFF"/><rect x="20" y="18" width="4" height="4" fill="#FFFFFF"/><rect x="26" y="18" width="4" height="4" fill="#FFFFFF"/><rect x="14" y="24" width="4" height="4" fill="#FFFFFF"/><rect x="20" y="24" width="4" height="4" fill="#FFFFFF"/><rect x="26" y="24" width="4" height="4" fill="#FFFFFF"/><rect x="14" y="30" width="4" height="4" fill="#FFFFFF"/><rect x="20" y="30" width="4" height="4" fill="#FFFFFF"/><rect x="26" y="30" width="4" height="4" fill="#FFFFFF"/><rect x="16" y="19" width="2" height="2" fill="#21A366"/><rect x="18" y="21" width="2" height="2" fill="#21A366"/><rect x="20" y="19" width="2" height="2" fill="#21A366"/><rect x="18" y="25" width="2" height="2" fill="#21A366"/><rect x="16" y="27" width="2" height="2" fill="#21A366"/><rect x="20" y="27" width="2" height="2" fill="#21A366"/></svg>',
                title: 'Excel Models/files',
                description: '<p>Connect and sync your Excel models and spreadsheets directly. Our platform seamlessly integrates with your existing Excel files, maintaining formulas and formatting while enabling real-time collaboration.</p><ul><li>Direct Excel file integration and synchronization</li><li>Preserve complex formulas and macros</li><li>Real-time collaboration across teams</li><li>Version control and change tracking</li></ul>'
            },
            'External data feeds': {
                icon: '<svg width="48" height="48" viewBox="0 0 48 48" fill="none"><rect x="14" y="16" width="4" height="4" fill="#5B9DD9"/><rect x="18" y="14" width="4" height="4" fill="#5B9DD9"/><rect x="22" y="12" width="4" height="4" fill="#5B9DD9"/><rect x="26" y="14" width="4" height="4" fill="#5B9DD9"/><rect x="30" y="16" width="4" height="4" fill="#5B9DD9"/><rect x="10" y="20" width="28" height="8" fill="#5B9DD9"/><rect x="12" y="18" width="24" height="2" fill="#7CB8EA"/><rect x="12" y="22" width="24" height="4" fill="#4A89C3"/><rect x="20" y="30" width="2" height="6" fill="#FFD700"/><rect x="26" y="30" width="2" height="6" fill="#FFD700"/><rect x="18" y="34" width="6" height="2" fill="#FFD700"/><rect x="24" y="34" width="6" height="2" fill="#FFD700"/><rect x="20" y="36" width="2" height="2" fill="#FFD700"/><rect x="26" y="36" width="2" height="2" fill="#FFD700"/><rect x="16" y="20" width="2" height="2" fill="#FFFFFF"/><rect x="22" y="20" width="2" height="2" fill="#FFFFFF"/><rect x="28" y="20" width="2" height="2" fill="#FFFFFF"/><rect x="19" y="24" width="2" height="2" fill="#FFFFFF"/><rect x="25" y="24" width="2" height="2" fill="#FFFFFF"/></svg>',
                title: 'External data feeds',
                description: '<p>Integrate market data, economic indicators, and third-party data feeds. Access comprehensive financial data from leading providers to enhance your models with real-time insights.</p><ul><li>Real-time market data from major providers</li><li>Economic indicators and macro data</li><li>Industry benchmarks and trends</li><li>Automated data refreshes</li></ul>'
            },
            'Custom data feeds': {
                icon: '<svg width="48" height="48" viewBox="0 0 48 48" fill="none"><rect x="14" y="10" width="20" height="4" fill="#9B59B6"/><rect x="12" y="12" width="2" height="4" fill="#8E44AD"/><rect x="34" y="12" width="2" height="4" fill="#8E44AD"/><rect x="14" y="14" width="20" height="2" fill="#B97FC9"/><rect x="14" y="18" width="20" height="4" fill="#9B59B6"/><rect x="12" y="20" width="2" height="4" fill="#8E44AD"/><rect x="34" y="20" width="2" height="4" fill="#8E44AD"/><rect x="14" y="22" width="20" height="2" fill="#B97FC9"/><rect x="14" y="26" width="20" height="4" fill="#9B59B6"/><rect x="12" y="28" width="2" height="4" fill="#8E44AD"/><rect x="34" y="28" width="2" height="4" fill="#8E44AD"/><rect x="14" y="30" width="20" height="2" fill="#B97FC9"/><rect x="22" y="34" width="4" height="2" fill="#E67E22"/><rect x="20" y="36" width="2" height="2" fill="#E67E22"/><rect x="26" y="36" width="2" height="2" fill="#E67E22"/><rect x="18" y="38" width="2" height="2" fill="#E67E22"/><rect x="28" y="38" width="2" height="2" fill="#E67E22"/><rect x="18" y="12" width="2" height="2" fill="#3EE8C0"/><rect x="28" y="12" width="2" height="2" fill="#3EE8C0"/><rect x="18" y="20" width="2" height="2" fill="#3EE8C0"/><rect x="28" y="28" width="2" height="2" fill="#3EE8C0"/></svg>',
                title: 'Custom data feeds',
                description: '<p>Build tailored data connections for your specific requirements. Our flexible API framework allows you to create custom integrations that fit your unique data architecture and business needs.</p><ul><li>Flexible API configuration</li><li>Custom data transformation pipelines</li><li>Support for any data format or protocol</li><li>Dedicated integration support</li></ul>'
            },
            'SaaS and ERP systems': {
                icon: '<svg width="48" height="48" viewBox="0 0 48 48" fill="none"><rect x="14" y="14" width="4" height="4" fill="#3498DB"/><rect x="18" y="12" width="4" height="4" fill="#3498DB"/><rect x="22" y="10" width="4" height="4" fill="#3498DB"/><rect x="26" y="12" width="4" height="4" fill="#3498DB"/><rect x="30" y="14" width="4" height="4" fill="#3498DB"/><rect x="10" y="18" width="28" height="10" fill="#3498DB"/><rect x="12" y="16" width="24" height="2" fill="#5DADE2"/><rect x="12" y="20" width="24" height="6" fill="#2874A6"/><rect x="20" y="18" width="8" height="8" fill="#ECF0F1"/><rect x="22" y="16" width="4" height="2" fill="#ECF0F1"/><rect x="22" y="26" width="4" height="2" fill="#ECF0F1"/><rect x="18" y="20" width="2" height="4" fill="#ECF0F1"/><rect x="28" y="20" width="2" height="4" fill="#ECF0F1"/><rect x="22" y="20" width="4" height="4" fill="#2C3E50"/><rect x="16" y="30" width="4" height="2" fill="#E74C3C"/><rect x="22" y="30" width="4" height="2" fill="#2ECC71"/><rect x="28" y="30" width="4" height="2" fill="#F39C12"/><rect x="18" y="32" width="2" height="4" fill="#E74C3C"/><rect x="24" y="32" width="2" height="4" fill="#2ECC71"/><rect x="28" y="32" width="2" height="4" fill="#F39C12"/></svg>',
                title: 'SaaS and ERP systems',
                description: '<p>Link with enterprise platforms like SAP, Oracle, Salesforce, NetSuite, and Microsoft Dynamics. Seamlessly import financial and operational data from your core business systems.</p><ul><li>Pre-built connectors for major platforms</li><li>Multi-entity and multi-currency support</li><li>Automated field mapping and validation</li><li>Secure enterprise-grade connections</li></ul>'
            },
            'Bespoke systems': {
                icon: '<svg width="48" height="48" viewBox="0 0 48 48" fill="none"><rect x="8" y="10" width="32" height="28" fill="#2C3E50"/><rect x="10" y="12" width="28" height="24" fill="#1A252F"/><rect x="12" y="14" width="3" height="3" fill="#E74C3C"/><rect x="17" y="14" width="3" height="3" fill="#F39C12"/><rect x="22" y="14" width="3" height="3" fill="#2ECC71"/><rect x="12" y="20" width="4" height="2" fill="#E74C3C"/><rect x="18" y="20" width="8" height="2" fill="#3498DB"/><rect x="28" y="20" width="6" height="2" fill="#2ECC71"/><rect x="14" y="24" width="6" height="2" fill="#9B59B6"/><rect x="22" y="24" width="10" height="2" fill="#F39C12"/><rect x="14" y="28" width="8" height="2" fill="#3498DB"/><rect x="24" y="28" width="4" height="2" fill="#E74C3C"/><rect x="12" y="32" width="6" height="2" fill="#2ECC71"/><rect x="20" y="32" width="12" height="2" fill="#9B59B6"/><rect x="34" y="32" width="2" height="2" fill="#ECF0F1"/><rect x="20" y="40" width="2" height="2" fill="#3EE8C0"/><rect x="24" y="40" width="2" height="2" fill="#3EE8C0"/><rect x="26" y="40" width="2" height="2" fill="#3EE8C0"/></svg>',
                title: 'Bespoke systems',
                description: '<p>Connect proprietary systems and internal databases seamlessly. Our team works with you to build custom integrations for your unique internal systems and legacy applications.</p><ul><li>Custom integration development</li><li>Legacy system compatibility</li><li>Secure on-premise connections</li><li>Ongoing integration maintenance</li></ul>'
            },
            'Unstructured data': {
                icon: '<svg width="48" height="48" viewBox="0 0 48 48" fill="none"><rect x="10" y="12" width="12" height="16" fill="#E74C3C"/><rect x="12" y="14" width="8" height="2" fill="#FFFFFF"/><rect x="12" y="18" width="8" height="1" fill="#FFFFFF"/><rect x="12" y="20" width="6" height="1" fill="#FFFFFF"/><rect x="12" y="22" width="8" height="1" fill="#FFFFFF"/><rect x="12" y="24" width="5" height="1" fill="#FFFFFF"/><rect x="18" y="16" width="14" height="12" fill="#3498DB"/><rect x="20" y="18" width="10" height="8" fill="#5DADE2"/><rect x="20" y="18" width="2" height="2" fill="#3498DB"/><rect x="28" y="18" width="2" height="2" fill="#3498DB"/><rect x="22" y="20" width="6" height="2" fill="#3498DB"/><rect x="24" y="22" width="2" height="2" fill="#3498DB"/><rect x="24" y="8" width="12" height="14" fill="#F39C12"/><rect x="26" y="10" width="8" height="1" fill="#34495E"/><rect x="26" y="12" width="8" height="1" fill="#34495E"/><rect x="26" y="14" width="6" height="1" fill="#34495E"/><rect x="26" y="16" width="8" height="1" fill="#34495E"/><rect x="26" y="18" width="7" height="1" fill="#34495E"/><rect x="14" y="32" width="20" height="4" fill="#9B59B6"/><rect x="16" y="34" width="2" height="1" fill="#ECF0F1"/><rect x="20" y="34" width="2" height="1" fill="#ECF0F1"/><rect x="24" y="34" width="2" height="1" fill="#ECF0F1"/><rect x="28" y="34" width="2" height="1" fill="#ECF0F1"/><rect x="32" y="34" width="2" height="1" fill="#ECF0F1"/></svg>',
                title: 'Unstructured data',
                description: '<p>Extract insights from PDFs, emails, and documents using AI. Our advanced AI-powered extraction tools automatically identify and extract financial data from unstructured sources.</p><ul><li>AI-powered document parsing</li><li>Automatic data extraction from PDFs and emails</li><li>Intelligent table and figure recognition</li><li>Multi-format support with high accuracy</li></ul>'
            }
        };

        function openModal(cardName) {
            const data = cardData[cardName];
            if (!data) return;

            document.getElementById('modalIcon').innerHTML = data.icon;
            document.getElementById('modalTitle').textContent = data.title;
            document.getElementById('modalBody').innerHTML = data.description;
            document.getElementById('cardModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('cardModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        // Close modal when clicking outside
        document.getElementById('cardModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // Add click handlers to all data source cards
        document.addEventListener('DOMContentLoaded', function() {
            const cards = document.querySelectorAll('.data-source-card');
            cards.forEach(card => {
                card.addEventListener('click', function() {
                    const cardName = this.querySelector('.card-label').textContent;
                    openModal(cardName);
                });
            });
        });

        // Section 5: Loading Bar Animation
        let loadingBarAnimated = false;

        function startLoadingBarAnimation() {
            if (loadingBarAnimated) return;
            loadingBarAnimated = true;

            const loadingBarFill = document.getElementById('loadingBarFill');
            const loadingPercentage = document.getElementById('loadingPercentage');
            const getStartedButton = document.getElementById('getStartedButton');

            if (!loadingBarFill || !loadingPercentage || !getStartedButton) return;

            let progress = 0;
            const duration = 3500; // 3.5 seconds for the loading animation
            const interval = 50; // Update every 50ms
            const steps = duration / interval;
            const increment = 100 / steps;

            const animationInterval = setInterval(() => {
                progress += increment;
                
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(animationInterval);
                    
                    // Show the Get Started button after loading completes
                    setTimeout(() => {
                        getStartedButton.classList.add('visible');
                    }, 300);
                }

                // Update the progress bar and percentage
                loadingBarFill.style.width = progress + '%';
                loadingPercentage.textContent = Math.floor(progress) + '%';
            }, interval);
        }

        // Use Intersection Observer to detect when Section 5 is in view
        const section5Observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !loadingBarAnimated) {
                    startLoadingBarAnimation();
                }
            });
        }, {
            threshold: 0.3 // Trigger when 30% of the section is visible
        });

        // Start observing Section 5 when the DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            const section5 = document.getElementById('section-5');
            if (section5) {
                section5Observer.observe(section5);
            }
        });
    </script>

</html>